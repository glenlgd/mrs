# 创建集群（历史版本）<a name="ZH-CN_TOPIC_0102926517"></a>

创建集群时，选择的版本不同，部分集群配置参数也不同。

-   当集群版本为**MRS 1.8.0**版本时，请参见[创建MRS 1.8.0版本集群](#section14486125618213)。
-   当集群版本为**MRS 1.7.2**版本时，请参见[创建MRS 1.7.2版本集群](#section8976020134313)。
-   当集群版本为**MRS 1.6.3**版本时，请参见[创建MRS 1.6.3版本集群](#section1874913301445)。
-   当集群版本为**MRS 1.5.1**版本时，请参见[创建MRS 1.5.1版本集群](#zh-cn_topic_0013363945_section26191365175227)。

>![](public_sys-resources/icon-note.gif) **说明：**   
>创建的节点个数越多，对管理节点（即master节点）的硬盘容量要求越高。为了保证集群能够健康地运行，当创建的节点个数达到300时，建议将master的硬盘容量配置成600GB以上；当创建的节点个数达到500时，建议将master的硬盘容量配置成1TB以上。  

## 创建MRS 1.8.0版本集群<a name="section14486125618213"></a>

1.  登录MRS管理控制台。
2.  单击**“购买集群”**，进入**“购买集群”**页面。

    >![](public_sys-resources/icon-note.gif) **说明：**   
    >创建集群时需要注意配额提醒。当资源配额不足时，建议按照提示申请足够的资源，再创建集群。  

3.  参考下列表格配置集群基本信息。

    **表 1**  配置集群基本信息

    <a name="table827451072215"></a>
    <table><thead align="left"><tr id="row14362171015227"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.3.1.1"><p id="p5394710112211"><a name="p5394710112211"></a><a name="p5394710112211"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="80%" id="mcps1.2.3.1.2"><p id="p17429310172214"><a name="p17429310172214"></a><a name="p17429310172214"></a>参数说明</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row44585104221"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p348771062219"><a name="p348771062219"></a><a name="p348771062219"></a>计费模式</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><div class="p" id="p1253515715229"><a name="p1253515715229"></a><a name="p1253515715229"></a>MRS提供两种计费模式：<a name="ul653811103224"></a><a name="ul653811103224"></a><ul id="ul653811103224"><li>包年/包月</li><li>按需计费</li></ul>
    </div>
    </td>
    </tr>
    <tr id="row9621181013227"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p565421002211"><a name="p565421002211"></a><a name="p565421002211"></a>当前区域</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p6692910122215"><a name="p6692910122215"></a><a name="p6692910122215"></a>选择区域。</p>
    </td>
    </tr>
    <tr id="row674451032214"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p20779161082220"><a name="p20779161082220"></a><a name="p20779161082220"></a>可用分区</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p13813161018221"><a name="p13813161018221"></a><a name="p13813161018221"></a>可用区域是使用独立电源和网络资源的物理区域。通过内部网络互联，再以物理方式进行隔离，提高了应用程序的可用性。建议您在不同的可用区域下创建集群。</p>
    <p id="p12863610152212"><a name="p12863610152212"></a><a name="p12863610152212"></a>选择集群工作区域下关联的可用区域。集群工作区域在工具菜单处选择，目前工作区域支持“<span id="text5883131019226"><a name="text5883131019226"></a><a name="text5883131019226"></a>华南-广州</span>”、“<span id="text159004102227"><a name="text159004102227"></a><a name="text159004102227"></a>华北-北京一</span>”和“<span id="text139151310202211"><a name="text139151310202211"></a><a name="text139151310202211"></a>华东-上海二</span>”。各工作区域下关联的可用区域如下：</p>
    <a name="ul10934010102216"></a><a name="ul10934010102216"></a><ul id="ul10934010102216"><li><span id="text698717109223"><a name="text698717109223"></a><a name="text698717109223"></a>华北-北京一</span>：可用区1、可用区2</li><li><span id="text1443201132218"><a name="text1443201132218"></a><a name="text1443201132218"></a>华东-上海二</span>：可用区1、可用区2、可用区3</li><li><span id="text99181162217"><a name="text99181162217"></a><a name="text99181162217"></a>华南-广州</span>：可用区1、可用区2、可用区3</li></ul>
    </td>
    </tr>
    <tr id="row16127161112225"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p1516451112222"><a name="p1516451112222"></a><a name="p1516451112222"></a>集群名称</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p9195191110224"><a name="p9195191110224"></a><a name="p9195191110224"></a>集群名称，集群名称不允许相同。</p>
    <p id="p17211101142215"><a name="p17211101142215"></a><a name="p17211101142215"></a>只能由字母、数字、中划线和下划线组成，并且长度为1～64个字符。</p>
    <p id="p222491112226"><a name="p222491112226"></a><a name="p222491112226"></a>默认名称为mrs_xxxx，xxxx为字母和数字的四位随机组合数，系统自动组合。</p>
    </td>
    </tr>
    <tr id="row3236151111221"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p22677112226"><a name="p22677112226"></a><a name="p22677112226"></a>集群版本</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p164241846162713"><a name="p164241846162713"></a><a name="p164241846162713"></a>目前支持MRS 1.5.1、MRS 1.6.3、MRS 1.7.2、MRS 1.8.0、MRS 1.8.1版本。默认值为当前最新版本。</p>
    </td>
    </tr>
    <tr id="row2407181116226"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p744961122210"><a name="p744961122210"></a><a name="p744961122210"></a>Kerberos认证</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p348516113221"><a name="p348516113221"></a><a name="p348516113221"></a>登录MRS Manager管理页面时是否启用Kerberos认证。</p>
    <a name="ul4501511162217"></a><a name="ul4501511162217"></a><ul id="ul4501511162217"><li><a name="image1055321114228"></a><a name="image1055321114228"></a><span><img id="image1055321114228" src="figures/zh-cn_image_0139213853.png"></span>：<span class="parmname" id="parmname662211114228"><a name="parmname662211114228"></a><a name="parmname662211114228"></a>“Kerberos认证”</span>关闭时，用户可使用MRS集群的所有功能。建议单用户场景下使用。不启用Kerberos认证时的安全配置建议请参见<a href="集群（未启用Kerberos认证）安全配置建议.md">集群（未启用Kerberos认证）安全配置建议</a>。</li><li><a name="image12714811172215"></a><a name="image12714811172215"></a><span><img id="image12714811172215" src="figures/zh-cn_image_0139213862.png"></span>：<span class="parmname" id="parmname778511142211"><a name="parmname778511142211"></a><a name="parmname778511142211"></a>“Kerberos认证”</span>开启时，普通用户无权限使用MRS集群的<span class="menucascade" id="menucascade180151142214"><a name="menucascade180151142214"></a><a name="menucascade180151142214"></a>“<span class="uicontrol" id="uicontrol581421142212"><a name="uicontrol581421142212"></a><a name="uicontrol581421142212"></a>文件管理</span>”</span>和<span class="menucascade" id="menucascade1583511119226"><a name="menucascade1583511119226"></a><a name="menucascade1583511119226"></a>“<span class="uicontrol" id="uicontrol885001112218"><a name="uicontrol885001112218"></a><a name="uicontrol885001112218"></a>作业管理</span>”</span>功能，并且无法查看Hadoop、Spark的作业记录以及集群资源使用情况。如果需要使用集群更多功能，需要找MRS Manager的管理员分配权限。建议在多用户场景下使用。</li></ul>
    <p id="p486810117226"><a name="p486810117226"></a><a name="p486810117226"></a>通过单击<a name="image13886611192216"></a><a name="image13886611192216"></a><span><img id="image13886611192216" src="figures/zh-cn_image_0139213870.png"></span>或<a name="image12955121114229"></a><a name="image12955121114229"></a><span><img id="image12955121114229" src="figures/zh-cn_image_0139213878.png"></span>来关闭或开启Kerberos认证。</p>
    <p id="p82241262216"><a name="p82241262216"></a><a name="p82241262216"></a>用户在创建了支持Kerberos认证的MRS集群之后，可以使用MRS Manager管理运行中的集群。具体操作请参见<a href="访问支持Kerberos认证的Manager.md">访问支持Kerberos认证的Manager</a>。</p>
    </td>
    </tr>
    <tr id="row824112124224"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p112741812112218"><a name="p112741812112218"></a><a name="p112741812112218"></a>用户名</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p123081812192213"><a name="p123081812192213"></a><a name="p123081812192213"></a>MRS Manager管理员用户，目前默认为<strong id="b332717126226"><a name="b332717126226"></a><a name="b332717126226"></a>admin</strong>用户。</p>
    <p id="p1634491211225"><a name="p1634491211225"></a><a name="p1634491211225"></a>对于MRS 1.8.0之前的版本，仅当<span class="parmname" id="parmname19362121232218"><a name="parmname19362121232218"></a><a name="parmname19362121232218"></a>“Kerberos认证”</span>配置为<span class="parmvalue" id="parmvalue6380151212215"><a name="parmvalue6380151212215"></a><a name="parmvalue6380151212215"></a>“开启”</span>：<a name="image43951112162214"></a><a name="image43951112162214"></a><span><img id="image43951112162214" src="figures/zh-cn_image_0139213902.png"></span>时需要配置此参数。</p>
    </td>
    </tr>
    <tr id="row1146181211229"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p164899123228"><a name="p164899123228"></a><a name="p164899123228"></a>密码</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p1451910123220"><a name="p1451910123220"></a><a name="p1451910123220"></a>配置MRS Manager管理员用户的密码。</p>
    <p id="p25401612152217"><a name="p25401612152217"></a><a name="p25401612152217"></a>需要满足：</p>
    <a name="ul15558141212227"></a><a name="ul15558141212227"></a><ul id="ul15558141212227"><li>密码长度应在8～32个字符之间</li><li>必须包含如下5种中至少3种字符的组合<a name="ul864791222215"></a><a name="ul864791222215"></a><ul id="ul864791222215"><li>至少一个小写字母</li><li>至少一个大写字母</li><li>至少一个数字</li><li>至少一个特殊字符：`~!@#$%^&amp;*()-_=+\|[{}];:'",&lt;.&gt;/?</li><li>空格</li></ul>
    </li><li>不能和用户名一样</li><li>不能和用户名的倒写一样</li></ul>
    <p id="p9932151219225"><a name="p9932151219225"></a><a name="p9932151219225"></a>安全程度：颜色条红、橙、绿分别表示密码安全强度弱、中、强。</p>
    <p id="p2948512102210"><a name="p2948512102210"></a><a name="p2948512102210"></a>对于MRS 1.8.0之前的版本，仅当<span class="parmname" id="parmname1966111213223"><a name="parmname1966111213223"></a><a name="parmname1966111213223"></a>“Kerberos认证”</span>配置为<span class="parmvalue" id="parmvalue898671252219"><a name="parmvalue898671252219"></a><a name="parmvalue898671252219"></a>“开启”</span>：<a name="image64101316225"></a><a name="image64101316225"></a><span><img id="image64101316225" src="figures/zh-cn_image_0139213894.png"></span>时需要配置此参数。</p>
    </td>
    </tr>
    <tr id="row13761213192219"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p31181113142217"><a name="p31181113142217"></a><a name="p31181113142217"></a>确认密码</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p3150151318229"><a name="p3150151318229"></a><a name="p3150151318229"></a>再次输入MRS Manager管理员用户的密码。</p>
    <p id="p1316811362219"><a name="p1316811362219"></a><a name="p1316811362219"></a>对于MRS 1.8.0之前的版本，仅当<span class="parmname" id="parmname20184201312213"><a name="parmname20184201312213"></a><a name="parmname20184201312213"></a>“Kerberos认证”</span>配置为<span class="parmvalue" id="parmvalue6205191342220"><a name="parmvalue6205191342220"></a><a name="parmvalue6205191342220"></a>“开启”</span>：<a name="image52221813152215"></a><a name="image52221813152215"></a><span><img id="image52221813152215" src="figures/zh-cn_image_0139213886.png"></span>时需要配置此参数。</p>
    </td>
    </tr>
    <tr id="row112961113172217"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p1232581322211"><a name="p1232581322211"></a><a name="p1232581322211"></a>集群类型</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><div class="p" id="p2978676228"><a name="p2978676228"></a><a name="p2978676228"></a>提供两种集群类型：<a name="ul129563133227"></a><a name="ul129563133227"></a><ul id="ul129563133227"><li>分析集群：用来做离线数据分析，提供的是Hadoop体系的组件。</li><li>流式集群：用来做流处理任务，提供的是流式处理组件。</li></ul>
    </div>
    <div class="note" id="note712810145222"><a name="note712810145222"></a><a name="note712810145222"></a><span class="notetitle"> 说明： </span><div class="notebody"><p id="p18144191462213"><a name="p18144191462213"></a><a name="p18144191462213"></a>MRS流式集群不支持<span class="parmname" id="parmname1616341411222"><a name="parmname1616341411222"></a><a name="parmname1616341411222"></a>“作业管理”</span>和<span class="parmname" id="parmname1181714122219"><a name="parmname1181714122219"></a><a name="parmname1181714122219"></a>“文件管理”</span>功能<sub id="sub162001738173"><a name="sub162001738173"></a><a name="sub162001738173"></a>。</sub></p>
    </div></div>
    </td>
    </tr>
    <tr id="row121717146225"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p9254191410224"><a name="p9254191410224"></a><a name="p9254191410224"></a>组件选择</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p14287814152211"><a name="p14287814152211"></a><a name="p14287814152211"></a>MRS 1.8.0版本配套的组件如下：</p>
    <div class="p" id="p17301589227"><a name="p17301589227"></a><a name="p17301589227"></a>分析集群组件<a name="ul10320191442219"></a><a name="ul10320191442219"></a><ul id="ul10320191442219"><li>Hadoop <span id="text10369191412224"><a name="text10369191412224"></a><a name="text10369191412224"></a>2.8.3</span>：分布式系统基础架构</li><li>Spark <span id="text10416181482220"><a name="text10416181482220"></a><a name="text10416181482220"></a>2.2.1</span>：内存分布式系统框架</li><li>Hive <span id="text24647143220"><a name="text24647143220"></a><a name="text24647143220"></a>1.2.1</span>：建立在Hadoop上的数据仓库框架</li><li>HBase 1.3.1：分布式列数据库</li><li>Hue <span id="text95681714152218"><a name="text95681714152218"></a><a name="text95681714152218"></a>3.11.0</span>：提供Hadoop UI能力，让用户通过浏览器分析处理Hadoop集群数据</li><li>Loader <span id="text11618514102218"><a name="text11618514102218"></a><a name="text11618514102218"></a>2.0.0</span>：基于开源sqoop 1.99.7开发，专为Apache Hadoop和结构化数据库（如关系型数据库）设计的高效传输大量数据的工具。<p id="p1463551414225"><a name="p1463551414225"></a><a name="p1463551414225"></a>Hadoop为必选组件，且Spark与Hive组件需要配套使用。请根据业务选择搭配组件。</p>
    </li></ul>
    </div>
    <div class="p" id="p1987118152218"><a name="p1987118152218"></a><a name="p1987118152218"></a>流式集群组件<a name="ul166631514182217"></a><a name="ul166631514182217"></a><ul id="ul166631514182217"><li>Kafka 1.1.0：提供分布式消息订阅的系统。</li><li>Storm 1.2.1：提供分布式实时计算的系统。</li><li>Flume <span id="text14782161452211"><a name="text14782161452211"></a><a name="text14782161452211"></a>1.6.0</span>：提供分布式、高可用、高可靠的海量日志采集、聚合和传输系统。</li></ul>
    </div>
    </td>
    </tr>
    <tr id="row1480114144225"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p78372014182216"><a name="p78372014182216"></a><a name="p78372014182216"></a>虚拟私有云</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p2086981415225"><a name="p2086981415225"></a><a name="p2086981415225"></a>VPC即虚拟私有云，是通过逻辑方式进行网络隔离，提供安全、隔离的网络环境。</p>
    <p id="p1688816146223"><a name="p1688816146223"></a><a name="p1688816146223"></a>选择需要创建集群的VPC，单击<span class="uicontrol" id="uicontrol890521412219"><a name="uicontrol890521412219"></a><a name="uicontrol890521412219"></a>“查看虚拟私有云”</span>进入VPC服务查看已创建的VPC名称和ID。如果没有VPC，需要创建一个新的VPC。</p>
    </td>
    </tr>
    <tr id="row15922121442213"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p1595419149225"><a name="p1595419149225"></a><a name="p1595419149225"></a>子网</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p13991151412216"><a name="p13991151412216"></a><a name="p13991151412216"></a>通过子网提供与其他网络隔离的、可以独享的网络资源，以提高网络安全。</p>
    <p id="p88101515223"><a name="p88101515223"></a><a name="p88101515223"></a>选择需要创建集群的子网，可进入VPC服务查看VPC下已创建的子网名称和ID。若VPC下未创建子网，请单击<span class="uicontrol" id="uicontrol18241715102215"><a name="uicontrol18241715102215"></a><a name="uicontrol18241715102215"></a>“创建子网”</span>进行创建。</p>
    <div class="notice" id="note74311515221"><a name="note74311515221"></a><a name="note74311515221"></a><span class="noticetitle"> 注意： </span><div class="noticebody"><p id="p5591415102212"><a name="p5591415102212"></a><a name="p5591415102212"></a>请勿将子网和网络ACL关联。</p>
    </div></div>
    </td>
    </tr>
    <tr id="row107371522218"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p71151215132217"><a name="p71151215132217"></a><a name="p71151215132217"></a>安全组</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p151482156223"><a name="p151482156223"></a><a name="p151482156223"></a>安全组是一组对弹性云服务器的访问规则的集合，为同一个VPC内具有相同安全保护需求并相互信任的弹性云服务器提供访问策略。</p>
    <p id="p181637155229"><a name="p181637155229"></a><a name="p181637155229"></a>用户创建集群时，可自动创建安全组，也可选择下拉框中已有的安全组。</p>
    </td>
    </tr>
    <tr id="row946703113359"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p12467163110352"><a name="p12467163110352"></a><a name="p12467163110352"></a>弹性公网IP</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p21911274314"><a name="p21911274314"></a><a name="p21911274314"></a>通过将弹性公网IP与MRS集群绑定，实现使用弹性公网IP访问MRS Manager的目的。</p>
    <p id="p19997852143711"><a name="p19997852143711"></a><a name="p19997852143711"></a>用户创建集群时，可选择下拉框中已有的弹性公网IP进行绑定。若下拉框中没有可选的弹性公网IP，可以单击<span class="parmname" id="parmname14739128123819"><a name="parmname14739128123819"></a><a name="parmname14739128123819"></a>“管理弹性公网IP”</span>进入弹性公网IP服务进行购买。</p>
    <div class="note" id="note69611412419"><a name="note69611412419"></a><a name="note69611412419"></a><span class="notetitle"> 说明： </span><div class="notebody"><a name="ul1531291915418"></a><a name="ul1531291915418"></a><ul id="ul1531291915418"><li>该参数仅在MRS 1.8.0及以后版本有效。</li><li>弹性公网IP必须和集群在同一区域。</li></ul>
    </div></div>
    </td>
    </tr>
    <tr id="row204101515202217"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p1644491516227"><a name="p1644491516227"></a><a name="p1644491516227"></a>集群高可用</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p1248114151227"><a name="p1248114151227"></a><a name="p1248114151227"></a>是否开启集群高可用，默认开启。</p>
    <p id="p9497181572216"><a name="p9497181572216"></a><a name="p9497181572216"></a>启用高可用特性时，所有组件的管理进程将会部署在两个master节点上，实现双机热备，防止单机故障，提高可靠性。当关闭高可用特性时，所有组件的管理进程只会部署在一个master节点上，当某个组件的进程出现异常时，该组件将无法提供服务。</p>
    <a name="ul75121815142218"></a><a name="ul75121815142218"></a><ul id="ul75121815142218"><li><a name="image6563191572210"></a><a name="image6563191572210"></a><span><img id="image6563191572210" src="figures/zh-cn_image_0139213910.png"></span>：<span class="parmname" id="parmname46306150220"><a name="parmname46306150220"></a><a name="parmname46306150220"></a>“集群高可用”</span>关闭时，Master节点实例数量固定为1个，Core节点实例数量默认为3个，最小可调整为1个。</li><li><a name="image167911158227"></a><a name="image167911158227"></a><span><img id="image167911158227" src="figures/zh-cn_image_0139213918.png"></span>：<span class="parmname" id="parmname77375155227"><a name="parmname77375155227"></a><a name="parmname77375155227"></a>“集群高可用”</span>开启时，Master节点实例数量固定为2个，Core节点实例数量默认为3个，最小可调整为1个。</li></ul>
    <p id="p775111519221"><a name="p775111519221"></a><a name="p775111519221"></a>通过单击<a name="image1766315162218"></a><a name="image1766315162218"></a><span><img id="image1766315162218" src="figures/zh-cn_image_0139213948.png"></span>或<a name="image18841161511228"></a><a name="image18841161511228"></a><span><img id="image18841161511228" src="figures/zh-cn_image_0139213960.png"></span>来关闭或开启集群高可用。</p>
    </td>
    </tr>
    </tbody>
    </table>

    **表 2**  集群节点信息

    <a name="table6931915162211"></a>
    <table><thead align="left"><tr id="row14232161225"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.3.1.1"><p id="p959171672214"><a name="p959171672214"></a><a name="p959171672214"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="80%" id="mcps1.2.3.1.2"><p id="p1993161642211"><a name="p1993161642211"></a><a name="p1993161642211"></a>参数说明</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row413061672216"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p10170111662218"><a name="p10170111662218"></a><a name="p10170111662218"></a>类型</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p42062162227"><a name="p42062162227"></a><a name="p42062162227"></a>MRS提供节点类型：</p>
    <a name="ul822851612213"></a><a name="ul822851612213"></a><ul id="ul822851612213"><li>Master：指集群Master节点，负责管理集群，协调将集群可执行文件分配到Core节点。此外，还会跟踪每个作业的执行状态，监控DataNode的运行状况。</li><li>Core：指集群Core节点，处理数据并在HDFS中存储过程数据。</li><li>Task：指集群Task节点，主要用于计算，不存放持久数据。主要安装Yarn、Storm组件。Task节点为可选节点，数目可以是零。（MRS 1.6.0及以上版本支持。）<p id="p113537165220"><a name="p113537165220"></a><a name="p113537165220"></a>当集群数据量变化不大而集群业务处理能力需求变化比较大，大的业务处理能力只是临时需要，此时选择添加Task节点。</p>
    <a name="ul1368016172210"></a><a name="ul1368016172210"></a><ul id="ul1368016172210"><li>临时业务量增大，如年底报表处理。</li><li>需要在短时间内处理完原来需要处理很久的任务，如一些紧急分析任务。</li></ul>
    </li></ul>
    </td>
    </tr>
    <tr id="row845791642214"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p749251618229"><a name="p749251618229"></a><a name="p749251618229"></a>添加Task节点（可选配置）</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p1052951611222"><a name="p1052951611222"></a><a name="p1052951611222"></a>单击“添加Task节点”，配置Task节点信息。</p>
    <p id="p254912160222"><a name="p254912160222"></a><a name="p254912160222"></a>目前仅当创建按需计费集群时，单击“Task”所在行“关闭”后的 <a name="image1356581632212"></a><a name="image1356581632212"></a><span><img id="image1356581632212" src="figures/zh-cn_image_0139213968.gif"></span>，进入“弹性伸缩”页面，可启用弹性伸缩策略，详细操作请参见 <a href="弹性伸缩集群.md">弹性伸缩集群</a>。</p>
    </td>
    </tr>
    <tr id="row6614111614222"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p156491316102215"><a name="p156491316102215"></a><a name="p156491316102215"></a>实例规格</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><a name="ul672871617225"></a><a name="ul672871617225"></a>
    <p id="p12578232223"><a name="p12578232223"></a><a name="p12578232223"></a>选择主节点和核心节点的实例规格。MRS当前支持主机规格的配型由CPU+内存+Disk共同决定。</p>
    <p id="p19346134523019"><a name="p19346134523019"></a><a name="p19346134523019"></a><span id="text103101723122214"><a name="text103101723122214"></a><a name="text103101723122214"></a>华北-北京一</span>、<span id="text1325102342212"><a name="text1325102342212"></a><a name="text1325102342212"></a>华东-上海二</span>和华南-广州的工作区域里 MRS 1.8.0版本支持的实例规格详细说明请参见<a href="MRS所使用的弹性云服务器规格.md">MRS所使用的弹性云服务器规格</a>。</p>
    <a name="ul755911236227"></a><a name="ul755911236227"></a>
    <div class="note" id="note10901112411220"><a name="note10901112411220"></a><a name="note10901112411220"></a><span class="notetitle"> 说明： </span><div class="notebody"><a name="ul149360247226"></a><a name="ul149360247226"></a><ul id="ul149360247226"><li>节点的实例规格配置越高，数据处理分析能力越强，集群所需费用也越高。</li><li>当Core节点规格选择d2.4xlarge.8、d2.8xlarge.8后，<span class="parmvalue" id="parmvalue61221025132216"><a name="parmvalue61221025132216"></a><a name="parmvalue61221025132216"></a>“存储空间”</span>参数不显示。因HDD类型虚拟机，会携带数据磁盘，而普通非HDD类型的虚拟机，不会携带数据磁盘，以致需要用户添加磁盘存储空间。</li><li>当Core节点规格选择为HDD磁盘时，MRS无需为数据磁盘付费，但ECS需要为此付费。</li><li>当Core节点规格选择HDD磁盘时，Master节点和Core节点的系统磁盘大小为40GB，或者Master节点的数据磁盘大小为200GB，它们都称为SATA磁盘。</li><li>当Core节点规格选择非HDD磁盘时，Master节点和Core节点的磁盘类型取决于数据磁盘。</li><li>当节点的实例规格选项后标示<span class="parmvalue" id="parmvalue17300112520229"><a name="parmvalue17300112520229"></a><a name="parmvalue17300112520229"></a>“已售罄”</span>时，将无法购买此规格的节点，请选择其他规格节点进行购买。</li><li>Master节点中的4核8GB规格不在SLA售后范围内，仅适用于测试环境，不建议用于生产环境。</li></ul>
    </div></div>
    </td>
    </tr>
    <tr id="row193552251224"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p539552582218"><a name="p539552582218"></a><a name="p539552582218"></a>实例数量</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p1142912513225"><a name="p1142912513225"></a><a name="p1142912513225"></a>配置主节点和核心节点的个数。</p>
    <p id="p7450152513222"><a name="p7450152513222"></a><a name="p7450152513222"></a>Master：</p>
    <a name="ul44671425202210"></a><a name="ul44671425202210"></a><ul id="ul44671425202210"><li>开启“集群高可用”时，Master实例数量固定为2个。</li><li>关闭“集群高可用”时，Master实例数量固定为1个。</li></ul>
    <p id="p65605254226"><a name="p65605254226"></a><a name="p65605254226"></a>Core节点至少存在一个，Core节点和Task节点的数量之和不能超过500个。</p>
    <div class="note" id="note958213253224"><a name="note958213253224"></a><a name="note958213253224"></a><span class="notetitle"> 说明： </span><div class="notebody"><a name="ul1459932542214"></a><a name="ul1459932542214"></a><ul id="ul1459932542214"><li>Core节点默认的最大值为500，如果用户需要的Core节点数大于500，可以联系技术支持人员或者调用后台接口修改数据库。</li><li>过小的节点容量会导致您的集群运行缓慢，而过大的节点容量会产生不必要的成本，请根据您要处理的数据对集群节点数量进行调整。</li></ul>
    </div></div>
    </td>
    </tr>
    <tr id="row4702172517229"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p17421525122217"><a name="p17421525122217"></a><a name="p17421525122217"></a>数据盘</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p19789725112220"><a name="p19789725112220"></a><a name="p19789725112220"></a>Core节点数据磁盘存储空间。为增大数据存储容量，创建集群时可同时购买磁盘，有如下应用场景：</p>
    <a name="ul128071125102211"></a><a name="ul128071125102211"></a><ul id="ul128071125102211"><li>数据存储和计算分离，数据存储在OBS中，集群存储成本低，存储量不受限制，并且集群可以随时删除，但计算性能取决于OBS访问性能，相对HDFS有所下降，建议在数据计算不频繁场景下使用。</li><li>数据存储和计算不分离，数据存储在HDFS中，集群成本较高，计算性能高，但存储量受磁盘空间限制，删除集群前需将数据导出保存，建议在数据计算频繁场景下使用。</li></ul>
    <p id="p490152513221"><a name="p490152513221"></a><a name="p490152513221"></a>目前支持SATA、SAS和SSD存储类型：</p>
    <a name="ul2934162513222"></a><a name="ul2934162513222"></a><ul id="ul2934162513222"><li>SATA：普通IO</li><li>SAS：高IO</li><li>SSD：超高IO</li></ul>
    <p id="p17222613222"><a name="p17222613222"></a><a name="p17222613222"></a>取值范围：100GB～32000GB</p>
    <div class="note" id="note793726122214"><a name="note793726122214"></a><a name="note793726122214"></a><span class="notetitle"> 说明： </span><div class="notebody"><a name="ul10114626112218"></a><a name="ul10114626112218"></a><ul id="ul10114626112218"><li>创建的节点个数越多，对管理节点（即master节点）的硬盘容量要求越高。为了保证集群能够健康地运行，当创建的节点个数达到300时，建议将master的硬盘容量配置成600GB以上；当创建的节点个数达到500时，建议将master的硬盘容量配置成1TB以上。</li><li>Master节点自动为MRS Manager增加数据磁盘存储空间，硬盘类型与Core节点数据磁盘类型相同，但磁盘空间默认为200GB且不支持修改。</li><li>当Core节点规格选择d2.4xlarge.8、d2.8xlarge.8后，<span class="parmvalue" id="parmvalue1234752613221"><a name="parmvalue1234752613221"></a><a name="parmvalue1234752613221"></a>“存储空间”</span>参数不显示。</li></ul>
    </div></div>
    </td>
    </tr>
    </tbody>
    </table>

    **表 3**  登录信息

    <a name="table13841026142211"></a>
    <table><thead align="left"><tr id="row54749268224"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.3.1.1"><p id="p1951017262224"><a name="p1951017262224"></a><a name="p1951017262224"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="80%" id="mcps1.2.3.1.2"><p id="p35451026172217"><a name="p35451026172217"></a><a name="p35451026172217"></a>参数说明</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row18584142632217"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p15617182642216"><a name="p15617182642216"></a><a name="p15617182642216"></a>登录方式</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><a name="ul106591926132219"></a><a name="ul106591926132219"></a><ul id="ul106591926132219"><li>密码<p id="p1571018267228"><a name="p1571018267228"></a><a name="p1571018267228"></a>使用密码方式登录ECS节点。</p>
    <p id="p2072712619224"><a name="p2072712619224"></a><a name="p2072712619224"></a>密码设置约束如下：</p>
    <a name="ol374411261228"></a><a name="ol374411261228"></a><ol id="ol374411261228"><li>字符串类型，可输入的字符串长度为8-26。</li><li>至少包含三种字符组合，如大写字母，小写字母，数字，特殊字符（!@$%^-_=+[{}]:\,./?），但不能包含空格。</li><li>不能与用户名或者倒序用户名相同。</li></ol>
    </li><li>密钥对</li></ul>
    <p id="p14900726182211"><a name="p14900726182211"></a><a name="p14900726182211"></a>使用密钥方式登录集群ECS节点。从下拉框中选择密钥对，如果已获取私钥文件，请勾选“我确认已获取该密钥对中的私钥文件<i><span class="varname" id="varname191962616221"><a name="varname191962616221"></a><a name="varname191962616221"></a>SSHkey-bba1.pem</span></i>，否则无法登录弹性云服务器”。如果没有创建密钥对，请单击<span class="uicontrol" id="uicontrol8934112632220"><a name="uicontrol8934112632220"></a><a name="uicontrol8934112632220"></a>“查看密钥对”</span>创建或导入密钥，然后再获取私钥文件。</p>
    <p id="p49537262224"><a name="p49537262224"></a><a name="p49537262224"></a>密钥对即SSH密钥，包含SSH公钥和私钥。您可以新建一个SSH密钥，并下载私钥用于远程登录身份认证。为保证安全，私钥只能下载一次，请妥善保管。</p>
    <p id="p49691926182219"><a name="p49691926182219"></a><a name="p49691926182219"></a>您可以通过以下两种方式中的任意一种使用SSH密钥。</p>
    <a name="ol69846266221"></a><a name="ol69846266221"></a><ol id="ol69846266221"><li>创建SSH密钥：创建SSH密钥，同时会创建公钥和私钥，公钥保存在ECS系统中，私钥保存在用户本机。当登录弹性云服务器时，使用公钥和私钥进行鉴权。</li><li>导入SSH密钥：当用户已有公钥和私钥，可以选择将公钥导入系统。当登录弹性云服务器时，使用公钥和私钥进行鉴权。</li></ol>
    </td>
    </tr>
    </tbody>
    </table>

    **表 4**  购买时长配置

    <a name="table113602283221"></a>
    <table><thead align="left"><tr id="row12467628192220"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.3.1.1"><p id="p2510628182218"><a name="p2510628182218"></a><a name="p2510628182218"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="80%" id="mcps1.2.3.1.2"><p id="p18546182842210"><a name="p18546182842210"></a><a name="p18546182842210"></a>参数说明</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row19588122882217"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p1762315285226"><a name="p1762315285226"></a><a name="p1762315285226"></a>购买时长</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p4666112842216"><a name="p4666112842216"></a><a name="p4666112842216"></a>包年/包月模式下购买集群的时长。最短时长为1个月，最长时长为1年。</p>
    </td>
    </tr>
    </tbody>
    </table>

    **表 5**  高级配置信息

    <a name="table3701122852211"></a>
    <table><thead align="left"><tr id="row57931728152212"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.3.1.1"><p id="p1382615281221"><a name="p1382615281221"></a><a name="p1382615281221"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="80%" id="mcps1.2.3.1.2"><p id="p1286110288224"><a name="p1286110288224"></a><a name="p1286110288224"></a>参数说明</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row12902132815224"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p2939132811225"><a name="p2939132811225"></a><a name="p2939132811225"></a>现在配置</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p179765283228"><a name="p179765283228"></a><a name="p179765283228"></a>单击<span class="uicontrol" id="uicontrol139941228112214"><a name="uicontrol139941228112214"></a><a name="uicontrol139941228112214"></a>“现在配置”</span>，呈现添加标签、引导操作。</p>
    <a name="ul191515293227"></a><a name="ul191515293227"></a><ul id="ul191515293227"><li>添加标签具体请参考<a href="管理集群标签.md">管理集群标签</a></li><li>添加引导操作具体请参考<a href="引导操作简介.md">引导操作简介</a></li></ul>
    </td>
    </tr>
    <tr id="row151991329142210"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p723211298227"><a name="p723211298227"></a><a name="p723211298227"></a>暂不配置</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p20269162911223"><a name="p20269162911223"></a><a name="p20269162911223"></a>暂不配置任何信息。</p>
    </td>
    </tr>
    </tbody>
    </table>

4.  单击“立即购买“。

    >![](public_sys-resources/icon-note.gif) **说明：**   
    >如果您对价格有疑问，可以单击“价格计算器”，根据计费详情来了解产品价格。  

5.  确认集群详情，若选择“包年/包月”集群请单击“提交订单“，若选择“按需计费”集群请单击“提交申请“，成功提交集群创建任务。
6.  单击“返回集群列表”，可以查看到集群创建的状态。

    集群创建的状态过程请参见[表1](集群列表简介.md#table3950169215120)中的“状态”参数说明。

    集群创建需要时间，所创集群的初始状态为“启动中”，创建成功后状态更新为“运行中”，请您耐心等待。

    MRS系统界面支持同一时间并发创建10个集群，且最多支持管理集群100个。

    >![](public_sys-resources/icon-note.gif) **说明：**   
    >当创建集群时，您还可以创建处于Failed或者Terminated状态的同名集群。  


## 创建MRS 1.7.2版本集群<a name="section8976020134313"></a>

1.  登录MRS管理控制台。
2.  单击**“购买集群”**，进入**“购买集群”**页面。

    >![](public_sys-resources/icon-note.gif) **说明：**   
    >创建集群时需要注意配额提醒。当资源配额不足时，建议按照提示申请足够的资源，再创建集群。  

3.  参考下列表格配置集群基本信息。

    **表 6**  配置集群基本信息

    <a name="table135612357434"></a>
    <table><thead align="left"><tr id="row3434435124313"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.3.1.1"><p id="p13461135144314"><a name="p13461135144314"></a><a name="p13461135144314"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="80%" id="mcps1.2.3.1.2"><p id="p5488113544314"><a name="p5488113544314"></a><a name="p5488113544314"></a>参数说明</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row451913352434"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p95501935174319"><a name="p95501935174319"></a><a name="p95501935174319"></a>计费模式</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><div class="p" id="p1556333574313"><a name="p1556333574313"></a><a name="p1556333574313"></a>MRS提供两种计费模式：<a name="ul1357753511434"></a><a name="ul1357753511434"></a><ul id="ul1357753511434"><li>包年/包月</li><li>按需计费</li></ul>
    </div>
    </td>
    </tr>
    <tr id="row136470358437"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p6675123554312"><a name="p6675123554312"></a><a name="p6675123554312"></a>当前区域</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p187050353438"><a name="p187050353438"></a><a name="p187050353438"></a>选择区域。</p>
    </td>
    </tr>
    <tr id="row9735203574320"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p5767173518431"><a name="p5767173518431"></a><a name="p5767173518431"></a>可用分区</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p179743524313"><a name="p179743524313"></a><a name="p179743524313"></a>可用区域是使用独立电源和网络资源的物理区域。通过内部网络互联，再以物理方式进行隔离，提高了应用程序的可用性。建议您在不同的可用区域下创建集群。</p>
    <p id="p284823511439"><a name="p284823511439"></a><a name="p284823511439"></a>选择集群工作区域下关联的可用区域。集群工作区域在工具菜单处选择，目前工作区域支持“<span id="text1086313564314"><a name="text1086313564314"></a><a name="text1086313564314"></a>华南-广州</span>”、“<span id="text48761935194315"><a name="text48761935194315"></a><a name="text48761935194315"></a>华北-北京一</span>”和“<span id="text488713516433"><a name="text488713516433"></a><a name="text488713516433"></a>华东-上海二</span>”。各工作区域下关联的可用区域如下：</p>
    <a name="ul7901935204316"></a><a name="ul7901935204316"></a><ul id="ul7901935204316"><li><span id="text1093983511430"><a name="text1093983511430"></a><a name="text1093983511430"></a>华北-北京一</span>：可用区1、可用区2</li><li><span id="text129851235124313"><a name="text129851235124313"></a><a name="text129851235124313"></a>华东-上海二</span>：可用区1、可用区2、可用区3</li><li><span id="text625203664317"><a name="text625203664317"></a><a name="text625203664317"></a>华南-广州</span>：可用区1、可用区2、可用区3</li></ul>
    </td>
    </tr>
    <tr id="row125143615431"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p377203611438"><a name="p377203611438"></a><a name="p377203611438"></a>集群名称</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p1210512363439"><a name="p1210512363439"></a><a name="p1210512363439"></a>集群名称，集群名称不允许相同。</p>
    <p id="p1012133634310"><a name="p1012133634310"></a><a name="p1012133634310"></a>只能由字母、数字、中划线和下划线组成，并且长度为1～64个字符。</p>
    <p id="p11134136104316"><a name="p11134136104316"></a><a name="p11134136104316"></a>默认名称为mrs_xxxx，xxxx为字母和数字的四位随机组合数，系统自动组合。</p>
    </td>
    </tr>
    <tr id="row19148113615433"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p1178236154314"><a name="p1178236154314"></a><a name="p1178236154314"></a>集群版本</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p166067316296"><a name="p166067316296"></a><a name="p166067316296"></a>目前支持MRS 1.5.1、MRS 1.6.3、MRS 1.7.2、MRS 1.8.0、MRS 1.8.1版本。默认值为当前最新版本。</p>
    </td>
    </tr>
    <tr id="row20284153624318"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p17316153684317"><a name="p17316153684317"></a><a name="p17316153684317"></a>Kerberos认证</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p1434314369431"><a name="p1434314369431"></a><a name="p1434314369431"></a>登录MRS Manager管理页面时是否启用Kerberos认证。</p>
    <a name="ul73542367432"></a><a name="ul73542367432"></a><ul id="ul73542367432"><li><a name="image639543619435"></a><a name="image639543619435"></a><span><img id="image639543619435" src="figures/zh-cn_image_0130860663.png"></span>：<span class="parmname" id="parmname17445836174313"><a name="parmname17445836174313"></a><a name="parmname17445836174313"></a>“Kerberos认证”</span>关闭时，用户可使用MRS集群的所有功能。建议单用户场景下使用。关闭Kerberos认证的集群，用户可以直接访问MRS的集群管理页面和组件，无需安全认证。不启用Kerberos认证时的安全配置建议请参见<a href="集群（未启用Kerberos认证）安全配置建议.md">集群（未启用Kerberos认证）安全配置建议</a>。</li><li><a name="image452753634314"></a><a name="image452753634314"></a><span><img id="image452753634314" src="figures/zh-cn_image_0130860671.png"></span>：<span class="parmname" id="parmname155841836144310"><a name="parmname155841836144310"></a><a name="parmname155841836144310"></a>“Kerberos认证”</span>开启时，普通用户无权限使用MRS集群的<span class="menucascade" id="menucascade4596183664310"><a name="menucascade4596183664310"></a><a name="menucascade4596183664310"></a>“<span class="uicontrol" id="uicontrol16116363431"><a name="uicontrol16116363431"></a><a name="uicontrol16116363431"></a>文件管理</span>”</span>和<span class="menucascade" id="menucascade13626636144314"><a name="menucascade13626636144314"></a><a name="menucascade13626636144314"></a>“<span class="uicontrol" id="uicontrol166411436164312"><a name="uicontrol166411436164312"></a><a name="uicontrol166411436164312"></a>作业管理</span>”</span>功能，并且无法查看Hadoop、Spark的作业记录以及集群资源使用情况。如果需要使用集群更多功能，需要找MRS Manager的管理员分配权限。建议在多用户场景下使用。</li></ul>
    <p id="p1565743664317"><a name="p1565743664317"></a><a name="p1565743664317"></a>通过单击<a name="image867293684311"></a><a name="image867293684311"></a><span><img id="image867293684311" src="figures/zh-cn_image_0130860680.png"></span>或<a name="image6730183616430"></a><a name="image6730183616430"></a><span><img id="image6730183616430" src="figures/zh-cn_image_0130860709.png"></span>来关闭或开启Kerberos认证。</p>
    <p id="p14787153610433"><a name="p14787153610433"></a><a name="p14787153610433"></a>用户在创建了支持Kerberos认证的MRS集群之后，可以使用MRS Manager管理运行中的集群。用户需要在公有云平台上准备一个工作环境，以访问Manager。具体操作请参见<a href="访问支持Kerberos认证的Manager.md">访问支持Kerberos认证的Manager</a>。</p>
    <div class="note" id="note1644283192112"><a name="note1644283192112"></a><a name="note1644283192112"></a><span class="notetitle"> 说明： </span><div class="notebody"><p id="p15453831182110"><a name="p15453831182110"></a><a name="p15453831182110"></a>当用户具备MRS安全模式的权限时，<span class="parmname" id="parmname1646283119210"><a name="parmname1646283119210"></a><a name="parmname1646283119210"></a>“Kerberos认证”</span>、<span class="parmname" id="parmname17476631132114"><a name="parmname17476631132114"></a><a name="parmname17476631132114"></a>“用户名”</span>、<span class="parmname" id="parmname15491143113217"><a name="parmname15491143113217"></a><a name="parmname15491143113217"></a>“密码”</span>和<span class="parmname" id="parmname45026315219"><a name="parmname45026315219"></a><a name="parmname45026315219"></a>“确认密码”</span>参数才显示。</p>
    </div></div>
    </td>
    </tr>
    <tr id="row6931113644316"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p49599363436"><a name="p49599363436"></a><a name="p49599363436"></a>用户名</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p13986143612432"><a name="p13986143612432"></a><a name="p13986143612432"></a>MRS Manager管理员用户，目前默认为<strong id="b6053719431"><a name="b6053719431"></a><a name="b6053719431"></a>admin</strong>用户。</p>
    <p id="p61862320212"><a name="p61862320212"></a><a name="p61862320212"></a>仅当<span class="parmname" id="parmname419813262118"><a name="parmname419813262118"></a><a name="parmname419813262118"></a>“Kerberos认证”</span>配置为<span class="parmvalue" id="parmvalue22131832142117"><a name="parmvalue22131832142117"></a><a name="parmvalue22131832142117"></a>“开启”</span>：<a name="image11232163292115"></a><a name="image11232163292115"></a><span><img id="image11232163292115" src="figures/zh-cn_image_0130860735.png"></span>时需要配置此参数。</p>
    </td>
    </tr>
    <tr id="row61161637124317"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p01462037114313"><a name="p01462037114313"></a><a name="p01462037114313"></a>密码</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p1417763714438"><a name="p1417763714438"></a><a name="p1417763714438"></a>配置MRS Manager管理员用户的密码。</p>
    <p id="p11193837144311"><a name="p11193837144311"></a><a name="p11193837144311"></a>需要满足：</p>
    <a name="ul720843717439"></a><a name="ul720843717439"></a><ul id="ul720843717439"><li>密码长度应在8～32个字符之间</li><li>必须包含如下5种中至少3种字符的组合<a name="ul728215375438"></a><a name="ul728215375438"></a><ul id="ul728215375438"><li>至少一个小写字母</li><li>至少一个大写字母</li><li>至少一个数字</li><li>至少一个特殊字符：`~!@#$%^&amp;*()-_=+\|[{}];:'",&lt;.&gt;/?</li><li>空格</li></ul>
    </li><li>不能和用户名一样</li><li>不能和用户名的倒写一样</li></ul>
    <p id="p55081337114312"><a name="p55081337114312"></a><a name="p55081337114312"></a>安全程度：颜色条红、橙、绿分别表示密码安全强度弱、中、强。</p>
    <p id="p458928172711"><a name="p458928172711"></a><a name="p458928172711"></a>仅当<span class="parmname" id="parmname14601828132712"><a name="parmname14601828132712"></a><a name="parmname14601828132712"></a>“Kerberos认证”</span>配置为<span class="parmvalue" id="parmvalue364328122711"><a name="parmvalue364328122711"></a><a name="parmvalue364328122711"></a>“开启”</span>：<a name="image4686281277"></a><a name="image4686281277"></a><span><img id="image4686281277" src="figures/zh-cn_image_0130860735.png"></span>时需要配置此参数。</p>
    </td>
    </tr>
    <tr id="row76302037174313"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p0659837204316"><a name="p0659837204316"></a><a name="p0659837204316"></a>确认密码</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p9692537134313"><a name="p9692537134313"></a><a name="p9692537134313"></a>再次输入MRS Manager管理员用户的密码。</p>
    <p id="p3746431152719"><a name="p3746431152719"></a><a name="p3746431152719"></a>仅当<span class="parmname" id="parmname9749931142714"><a name="parmname9749931142714"></a><a name="parmname9749931142714"></a>“Kerberos认证”</span>配置为<span class="parmvalue" id="parmvalue6752203122715"><a name="parmvalue6752203122715"></a><a name="parmvalue6752203122715"></a>“开启”</span>：<a name="image16754031202716"></a><a name="image16754031202716"></a><span><img id="image16754031202716" src="figures/zh-cn_image_0130860735.png"></span>时需要配置此参数。</p>
    </td>
    </tr>
    <tr id="row1481243715432"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p08422371436"><a name="p08422371436"></a><a name="p08422371436"></a>集群类型</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><div class="p" id="p485473724315"><a name="p485473724315"></a><a name="p485473724315"></a>提供两种集群类型：<a name="ul128721837144312"></a><a name="ul128721837144312"></a><ul id="ul128721837144312"><li>分析集群：用来做离线数据分析，提供的是Hadoop体系的组件。</li><li>流式集群：用来做流处理任务，提供的是流式处理组件。</li></ul>
    </div>
    <div class="note" id="note5969113712435"><a name="note5969113712435"></a><a name="note5969113712435"></a><span class="notetitle"> 说明： </span><div class="notebody"><p id="p16982837144313"><a name="p16982837144313"></a><a name="p16982837144313"></a>MRS流式集群不支持<span class="parmname" id="parmname16999937104320"><a name="parmname16999937104320"></a><a name="parmname16999937104320"></a>“作业管理”</span>和<span class="parmname" id="parmname5141838114311"><a name="parmname5141838114311"></a><a name="parmname5141838114311"></a>“文件管理”</span>功能。</p>
    </div></div>
    </td>
    </tr>
    <tr id="row64310386435"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p1470193814437"><a name="p1470193814437"></a><a name="p1470193814437"></a>组件选择</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p17976383431"><a name="p17976383431"></a><a name="p17976383431"></a>MRS 1.7.2版本配套的组件如下：</p>
    <div class="p" id="p1698438134316"><a name="p1698438134316"></a><a name="p1698438134316"></a>分析集群组件<a name="ul15115153818432"></a><a name="ul15115153818432"></a><ul id="ul15115153818432"><li>Hadoop <span id="text19155173884318"><a name="text19155173884318"></a><a name="text19155173884318"></a>2.8.3</span>：分布式系统基础架构</li><li>Spark <span id="text9196038174315"><a name="text9196038174315"></a><a name="text9196038174315"></a>2.2.1</span>：内存分布式系统框架</li><li>Hive <span id="text124143818439"><a name="text124143818439"></a><a name="text124143818439"></a>1.2.1</span>：建立在Hadoop上的数据仓库框架</li><li>HBase 1.3.1：分布式列数据库</li><li>Hue <span id="text03441038204318"><a name="text03441038204318"></a><a name="text03441038204318"></a>3.11.0</span>：提供Hadoop UI能力，让用户通过浏览器分析处理Hadoop集群数据</li><li>Loader <span id="text15386133813430"><a name="text15386133813430"></a><a name="text15386133813430"></a>2.0.0</span>：基于开源sqoop 1.99.7开发，专为Apache Hadoop和结构化数据库（如关系型数据库）设计的高效传输大量数据的工具。<p id="p7399038174317"><a name="p7399038174317"></a><a name="p7399038174317"></a>Hadoop为必选组件，且Spark与Hive组件需要配套使用。请根据业务选择搭配组件。</p>
    </li></ul>
    </div>
    <div class="p" id="p63991738104319"><a name="p63991738104319"></a><a name="p63991738104319"></a>流式集群组件<a name="ul12413123813435"></a><a name="ul12413123813435"></a><ul id="ul12413123813435"><li>Kafka 0.10.2.0：提供分布式消息订阅的系统。</li><li>Storm <span id="text18487183864312"><a name="text18487183864312"></a><a name="text18487183864312"></a>1.0.2</span>：提供分布式实时计算的系统。</li><li>Flume <span id="text1053653815432"><a name="text1053653815432"></a><a name="text1053653815432"></a>1.6.0</span>：提供分布式、高可用、高可靠的海量日志采集、聚合和传输系统。</li></ul>
    </div>
    </td>
    </tr>
    <tr id="row11551163804312"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p358023811432"><a name="p358023811432"></a><a name="p358023811432"></a>虚拟私有云</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p560663824319"><a name="p560663824319"></a><a name="p560663824319"></a>VPC即虚拟私有云，是通过逻辑方式进行网络隔离，提供安全、隔离的网络环境。</p>
    <p id="p462173814317"><a name="p462173814317"></a><a name="p462173814317"></a>选择需要创建集群的VPC，单击<span class="uicontrol" id="uicontrol3635203816439"><a name="uicontrol3635203816439"></a><a name="uicontrol3635203816439"></a>“查看虚拟私有云”</span>进入VPC服务查看已创建的VPC名称和ID。如果没有VPC，需要创建一个新的VPC。</p>
    </td>
    </tr>
    <tr id="row465113389439"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p16787383437"><a name="p16787383437"></a><a name="p16787383437"></a>子网</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p13704163894320"><a name="p13704163894320"></a><a name="p13704163894320"></a>通过子网提供与其他网络隔离的、可以独享的网络资源，以提高网络安全。</p>
    <p id="p197211638134320"><a name="p197211638134320"></a><a name="p197211638134320"></a>选择需要创建集群的子网，可进入VPC服务查看VPC下已创建的子网名称和ID。若VPC下未创建子网，请单击<span class="uicontrol" id="uicontrol973483818436"><a name="uicontrol973483818436"></a><a name="uicontrol973483818436"></a>“创建子网”</span>进行创建。</p>
    <div class="notice" id="note127482382430"><a name="note127482382430"></a><a name="note127482382430"></a><span class="noticetitle"> 注意： </span><div class="noticebody"><p id="p11762538184315"><a name="p11762538184315"></a><a name="p11762538184315"></a>请勿将子网和网络ACL关联。</p>
    </div></div>
    </td>
    </tr>
    <tr id="row19776338104313"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p1980413811431"><a name="p1980413811431"></a><a name="p1980413811431"></a>安全组</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p08351383433"><a name="p08351383433"></a><a name="p08351383433"></a>安全组是一组对弹性云服务器的访问规则的集合，为同一个VPC内具有相同安全保护需求并相互信任的弹性云服务器提供访问策略。</p>
    <p id="p484853844312"><a name="p484853844312"></a><a name="p484853844312"></a>用户创建集群时，可自动创建安全组，也可选择下拉框中已有的安全组。</p>
    </td>
    </tr>
    <tr id="row1750739154311"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p1385153934313"><a name="p1385153934313"></a><a name="p1385153934313"></a>集群高可用</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p01181639154320"><a name="p01181639154320"></a><a name="p01181639154320"></a>是否开启集群高可用，默认开启。</p>
    <p id="p111341239194318"><a name="p111341239194318"></a><a name="p111341239194318"></a>启用高可用特性时，所有组件的管理进程将会部署在两个master节点上，实现双机热备，防止单机故障，提高可靠性。当关闭高可用特性时，所有组件的管理进程只会部署在一个master节点上，当某个组件的进程出现异常时，该组件将无法提供服务。</p>
    <a name="ul171461739154318"></a><a name="ul171461739154318"></a><ul id="ul171461739154318"><li><a name="image181929392432"></a><a name="image181929392432"></a><span><img id="image181929392432" src="figures/zh-cn_image_0130860743.png"></span>：<span class="parmname" id="parmname142568391431"><a name="parmname142568391431"></a><a name="parmname142568391431"></a>“集群高可用”</span>关闭时，Master节点实例数量固定为1个，Core节点实例数量默认为3个，最小可调整为1个。</li><li><a name="image16295123974315"></a><a name="image16295123974315"></a><span><img id="image16295123974315" src="figures/zh-cn_image_0130860751.png"></span>：<span class="parmname" id="parmname18355153919436"><a name="parmname18355153919436"></a><a name="parmname18355153919436"></a>“集群高可用”</span>开启时，Master节点实例数量固定为2个，Core节点实例数量默认为3个，最小可调整为1个。</li></ul>
    <p id="p73701139104315"><a name="p73701139104315"></a><a name="p73701139104315"></a>通过单击<a name="image3387153934314"></a><a name="image3387153934314"></a><span><img id="image3387153934314" src="figures/zh-cn_image_0130860759.png"></span>或<a name="image3451153910434"></a><a name="image3451153910434"></a><span><img id="image3451153910434" src="figures/zh-cn_image_0130860767.png"></span>来关闭或开启集群高可用。</p>
    </td>
    </tr>
    </tbody>
    </table>

    **表 7**  集群节点信息

    <a name="table19522173904319"></a>
    <table><thead align="left"><tr id="row060073916434"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.3.1.1"><p id="p10637539104312"><a name="p10637539104312"></a><a name="p10637539104312"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="80%" id="mcps1.2.3.1.2"><p id="p1966818391433"><a name="p1966818391433"></a><a name="p1966818391433"></a>参数说明</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row1269513924317"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p1072793919432"><a name="p1072793919432"></a><a name="p1072793919432"></a>类型</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p575413912433"><a name="p575413912433"></a><a name="p575413912433"></a>MRS提供节点类型：</p>
    <a name="ul47691398438"></a><a name="ul47691398438"></a><ul id="ul47691398438"><li>Master：指集群Master节点，负责管理集群，协调将集群可执行文件分配到Core节点。此外，还会跟踪每个作业的执行状态，监控DataNode的运行状况。</li><li>Core：指集群Core节点，处理数据并在HDFS中存储过程数据。</li><li>Task：指集群Task节点，主要用于计算，不存放持久数据。主要安装Yarn、Storm组件。Task节点为可选节点，数目可以是零。（MRS 1.6.0及以上版本支持。）<p id="p1387018391438"><a name="p1387018391438"></a><a name="p1387018391438"></a>当集群数据量变化不大而集群业务处理能力需求变化比较大，大的业务处理能力只是临时需要，此时选择添加Task节点。</p>
    <a name="ul16886193924316"></a><a name="ul16886193924316"></a><ul id="ul16886193924316"><li>临时业务量增大，如年底报表处理。</li><li>需要在短时间内处理完原来需要处理很久的任务，如一些紧急分析任务。</li></ul>
    </li></ul>
    </td>
    </tr>
    <tr id="row69534396439"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p6979173910430"><a name="p6979173910430"></a><a name="p6979173910430"></a>添加Task节点（可选配置）</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p1694004313"><a name="p1694004313"></a><a name="p1694004313"></a>单击“添加Task节点”，配置Task节点信息。</p>
    <p id="p1191810101543"><a name="p1191810101543"></a><a name="p1191810101543"></a>目前仅当创建按需计费集群时，单击“Task”所在行“关闭”后的 <a name="image1691818101647"></a><a name="image1691818101647"></a><span><img id="image1691818101647" src="figures/zh-cn_image_0137349012.gif"></span>，进入“弹性伸缩”页面，可启用弹性伸缩策略，详细操作请参见 <a href="弹性伸缩集群.md">弹性伸缩集群</a>。</p>
    </td>
    </tr>
    <tr id="row26454012438"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p16971340104316"><a name="p16971340104316"></a><a name="p16971340104316"></a>实例规格</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><a name="ul2035819816225"></a><a name="ul2035819816225"></a>
    <p id="p1530419446433"><a name="p1530419446433"></a><a name="p1530419446433"></a>选择主节点和核心节点的实例规格。MRS当前支持主机规格的配型由CPU+内存+Disk共同决定。</p>
    <p id="p330420440435"><a name="p330420440435"></a><a name="p330420440435"></a><span id="text103321344104314"><a name="text103321344104314"></a><a name="text103321344104314"></a>华北-北京一</span>、<span id="text1334564415437"><a name="text1334564415437"></a><a name="text1334564415437"></a>华东-上海二</span>和华南-广州的工作区域里 MRS 1.7.2版本支持的实例规格详细说明请参见<a href="MRS所使用的弹性云服务器规格.md">MRS所使用的弹性云服务器规格</a>。</p>
    <a name="ul20364845153016"></a><a name="ul20364845153016"></a>
    <div class="note" id="note6703124519437"><a name="note6703124519437"></a><a name="note6703124519437"></a><span class="notetitle"> 说明： </span><div class="notebody"><a name="ul1373454519434"></a><a name="ul1373454519434"></a><ul id="ul1373454519434"><li>节点的实例规格配置越高，数据处理分析能力越强，集群所需费用也越高。</li><li>当Core节点规格选择d2.4xlarge.8、d2.8xlarge.8后，<span class="parmvalue" id="parmvalue198831645184316"><a name="parmvalue198831645184316"></a><a name="parmvalue198831645184316"></a>“存储空间”</span>参数不显示。因HDD类型虚拟机，会携带数据磁盘，而普通非HDD类型的虚拟机，不会携带数据磁盘，以致需要用户添加磁盘存储空间。</li><li>当Core节点规格选择为HDD磁盘时，MRS无需为数据磁盘付费，但ECS需要为此付费。</li><li>当Core节点规格选择HDD磁盘时，Master节点和Core节点的系统磁盘大小为40GB，或者Master节点的数据磁盘大小为200GB，它们都称为SATA磁盘。</li><li>当Core节点规格选择非HDD磁盘时，Master节点和Core节点的磁盘类型取决于数据磁盘。</li><li>当节点的实例规格选项后标示<span class="parmvalue" id="parmvalue2152046124316"><a name="parmvalue2152046124316"></a><a name="parmvalue2152046124316"></a>“已售罄”</span>时，将无法购买此规格的节点，请选择其他规格节点进行购买。</li><li>Master节点中的4核8GB规格不在SLA售后范围内，仅适用于测试环境，不建议用于生产环境。</li></ul>
    </div></div>
    </td>
    </tr>
    <tr id="row175684634317"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p2080144684318"><a name="p2080144684318"></a><a name="p2080144684318"></a>实例数量</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p10103184612435"><a name="p10103184612435"></a><a name="p10103184612435"></a>配置主节点和核心节点的个数。</p>
    <p id="p13116124654313"><a name="p13116124654313"></a><a name="p13116124654313"></a>Master：</p>
    <a name="ul1713084616434"></a><a name="ul1713084616434"></a><ul id="ul1713084616434"><li>开启“集群高可用”时，Master实例数量固定为2个。</li><li>关闭“集群高可用”时，Master实例数量固定为1个。</li></ul>
    <p id="p619820468436"><a name="p619820468436"></a><a name="p619820468436"></a>Core节点至少存在一个，Core节点和Task节点的数量之和不能超过500个。</p>
    <div class="note" id="note1420914461439"><a name="note1420914461439"></a><a name="note1420914461439"></a><span class="notetitle"> 说明： </span><div class="notebody"><a name="ul82214463433"></a><a name="ul82214463433"></a><ul id="ul82214463433"><li>Core节点默认的最大值为500，如果用户需要的Core节点数大于500，可以联系技术支持人员或者调用后台接口修改数据库。</li><li>过小的节点容量会导致您的集群运行缓慢，而过大的节点容量会产生不必要的成本，请根据您要处理的数据对集群节点数量进行调整。</li></ul>
    </div></div>
    </td>
    </tr>
    <tr id="row5289194644312"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p11317124611431"><a name="p11317124611431"></a><a name="p11317124611431"></a>数据盘</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p11341246124310"><a name="p11341246124310"></a><a name="p11341246124310"></a>Core节点数据磁盘存储空间。为增大数据存储容量，创建集群时可同时购买磁盘，有如下应用场景：</p>
    <a name="ul1935184624313"></a><a name="ul1935184624313"></a><ul id="ul1935184624313"><li>数据存储和计算分离，数据存储在OBS中，集群存储成本低，存储量不受限制，并且集群可以随时删除，但计算性能取决于OBS访问性能，相对HDFS有所下降，建议在数据计算不频繁场景下使用。</li><li>数据存储和计算不分离，数据存储在HDFS中，集群成本较高，计算性能高，但存储量受磁盘空间限制，删除集群前需将数据导出保存，建议在数据计算频繁场景下使用。</li></ul>
    <p id="p34184466432"><a name="p34184466432"></a><a name="p34184466432"></a>目前支持SATA、SAS和SSD存储类型：</p>
    <a name="ul194431646114319"></a><a name="ul194431646114319"></a><ul id="ul194431646114319"><li>SATA：普通IO</li><li>SAS：高IO</li><li>SSD：超高IO</li></ul>
    <p id="p1453824694314"><a name="p1453824694314"></a><a name="p1453824694314"></a>取值范围：100GB～32000GB</p>
    <div class="note" id="note8552114654317"><a name="note8552114654317"></a><a name="note8552114654317"></a><span class="notetitle"> 说明： </span><div class="notebody"><a name="ul17564134634319"></a><a name="ul17564134634319"></a><ul id="ul17564134634319"><li>创建的节点个数越多，对管理节点（即master节点）的硬盘容量要求越高。为了保证集群能够健康地运行，当创建的节点个数达到300时，建议将master的硬盘容量配置成600GB以上；当创建的节点个数达到500时，建议将master的硬盘容量配置成1TB以上。</li><li>Master节点自动为MRS Manager增加数据磁盘存储空间，硬盘类型与Core节点数据磁盘类型相同，但磁盘空间默认为200GB且不支持修改。</li><li>当Core节点规格选择d2.4xlarge.8、d2.8xlarge.8后，<span class="parmvalue" id="parmvalue14736446194318"><a name="parmvalue14736446194318"></a><a name="parmvalue14736446194318"></a>“存储空间”</span>参数不显示。</li></ul>
    </div></div>
    </td>
    </tr>
    </tbody>
    </table>

    **表 8**  登录信息

    <a name="table127622046144316"></a>
    <table><thead align="left"><tr id="row1783654624320"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.3.1.1"><p id="p12863174615439"><a name="p12863174615439"></a><a name="p12863174615439"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="80%" id="mcps1.2.3.1.2"><p id="p11892174612431"><a name="p11892174612431"></a><a name="p11892174612431"></a>参数说明</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row992214604310"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p69521746194311"><a name="p69521746194311"></a><a name="p69521746194311"></a>登录方式</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><a name="ul199791446114318"></a><a name="ul199791446114318"></a><ul id="ul199791446114318"><li>密码<p id="p1720164710433"><a name="p1720164710433"></a><a name="p1720164710433"></a>使用密码方式登录ECS节点。</p>
    <p id="p113784717433"><a name="p113784717433"></a><a name="p113784717433"></a>密码设置约束如下：</p>
    <a name="ol15110477435"></a><a name="ol15110477435"></a><ol id="ol15110477435"><li>字符串类型，可输入的字符串长度为8-26。</li><li>至少包含三种字符组合，如大写字母，小写字母，数字，特殊字符（!@$%^-_=+[{}]:\,./?），但不能包含空格。</li><li>不能与用户名或者倒序用户名相同。</li></ol>
    </li><li>密钥对</li></ul>
    <p id="p1417311475433"><a name="p1417311475433"></a><a name="p1417311475433"></a>使用密钥方式登录集群ECS节点。从下拉框中选择密钥对，如果已获取私钥文件，请勾选“我确认已获取该密钥对中的私钥文件<i><span class="varname" id="varname11190184734311"><a name="varname11190184734311"></a><a name="varname11190184734311"></a>SSHkey-bba1.pem</span></i>，否则无法登录弹性云服务器”。如果没有创建密钥对，请单击<span class="uicontrol" id="uicontrol15203144715437"><a name="uicontrol15203144715437"></a><a name="uicontrol15203144715437"></a>“查看密钥对”</span>创建或导入密钥，然后再获取私钥文件。</p>
    <p id="p621814475433"><a name="p621814475433"></a><a name="p621814475433"></a>密钥对即SSH密钥，包含SSH公钥和私钥。您可以新建一个SSH密钥，并下载私钥用于远程登录身份认证。为保证安全，私钥只能下载一次，请妥善保管。</p>
    <p id="p172314475435"><a name="p172314475435"></a><a name="p172314475435"></a>您可以通过以下两种方式中的任意一种使用SSH密钥。</p>
    <a name="ol4246154714313"></a><a name="ol4246154714313"></a><ol id="ol4246154714313"><li>创建SSH密钥：创建SSH密钥，同时会创建公钥和私钥，公钥保存在ECS系统中，私钥保存在用户本机。当登录弹性云服务器时，使用公钥和私钥进行鉴权。</li><li>导入SSH密钥：当用户已有公钥和私钥，可以选择将公钥导入系统。当登录弹性云服务器时，使用公钥和私钥进行鉴权。</li></ol>
    </td>
    </tr>
    </tbody>
    </table>

    **表 9**  购买时长配置

    <a name="table1330012483433"></a>
    <table><thead align="left"><tr id="row53746488432"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.3.1.1"><p id="p1740594819438"><a name="p1740594819438"></a><a name="p1740594819438"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="80%" id="mcps1.2.3.1.2"><p id="p143519482436"><a name="p143519482436"></a><a name="p143519482436"></a>参数说明</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row154688484432"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p1149634811437"><a name="p1149634811437"></a><a name="p1149634811437"></a>购买时长</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p25269484430"><a name="p25269484430"></a><a name="p25269484430"></a>包年/包月模式下购买集群的时长。最短时长为1个月，最长时长为1年。</p>
    </td>
    </tr>
    </tbody>
    </table>

    **表 10**  高级配置信息

    <a name="table1655524824319"></a>
    <table><thead align="left"><tr id="row156284481430"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.3.1.1"><p id="p26551848114312"><a name="p26551848114312"></a><a name="p26551848114312"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="80%" id="mcps1.2.3.1.2"><p id="p9689448164310"><a name="p9689448164310"></a><a name="p9689448164310"></a>参数说明</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row13720848184318"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p674764818436"><a name="p674764818436"></a><a name="p674764818436"></a>现在配置</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p20772194816436"><a name="p20772194816436"></a><a name="p20772194816436"></a>单击<span class="uicontrol" id="uicontrol16787164814320"><a name="uicontrol16787164814320"></a><a name="uicontrol16787164814320"></a>“现在配置”</span>，呈现添加标签、引导操作。</p>
    <a name="ul1446810289292"></a><a name="ul1446810289292"></a><ul id="ul1446810289292"><li>添加标签具体请参考<a href="管理集群标签.md">管理集群标签</a></li><li>添加引导操作具体请参考<a href="引导操作简介.md">引导操作简介</a></li></ul>
    </td>
    </tr>
    <tr id="row13944114816430"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p129691448124312"><a name="p129691448124312"></a><a name="p129691448124312"></a>暂不配置</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p1899911480438"><a name="p1899911480438"></a><a name="p1899911480438"></a>暂不配置任何信息。</p>
    </td>
    </tr>
    </tbody>
    </table>

4.  单击“立即购买“。

    >![](public_sys-resources/icon-note.gif) **说明：**   
    >如果您对价格有疑问，可以单击“价格计算器”，根据计费详情来了解产品价格。  

5.  确认集群详情，若选择“包年/包月”集群请单击“提交订单“，若选择“按需计费”集群请单击“提交申请“，成功提交集群创建任务。
6.  单击“返回集群列表”，可以查看到集群创建的状态。

    集群创建的状态过程请参见[表1](集群列表简介.md#table3950169215120)中的“状态”参数说明。

    集群创建需要时间，所创集群的初始状态为“启动中”，创建成功后状态更新为“运行中”，请您耐心等待。

    MRS系统界面支持同一时间并发创建10个集群，且最多支持管理集群100个。

    >![](public_sys-resources/icon-note.gif) **说明：**   
    >当创建集群时，您还可以创建处于Failed或者Terminated状态的同名集群。  


## 创建MRS 1.6.3版本集群<a name="section1874913301445"></a>

1.  登录MRS管理控制台。
2.  单击**“购买集群”**，进入**“购买集群”**页面。

    >![](public_sys-resources/icon-note.gif) **说明：**   
    >创建集群时需要注意配额提醒。当资源配额不足时，建议按照提示申请足够的资源，再创建集群。  

3.  参考下列表格配置集群基本信息。

    **表 11**  配置集群基本信息

    <a name="table9938830049"></a>
    <table><thead align="left"><tr id="row16994183019414"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.3.1.1"><p id="p31418311747"><a name="p31418311747"></a><a name="p31418311747"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="80%" id="mcps1.2.3.1.2"><p id="p18283311141"><a name="p18283311141"></a><a name="p18283311141"></a>参数说明</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row34493113411"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p16153117411"><a name="p16153117411"></a><a name="p16153117411"></a>计费模式</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><div class="p" id="p96820315417"><a name="p96820315417"></a><a name="p96820315417"></a>MRS提供两种计费模式：<a name="ul13784311414"></a><a name="ul13784311414"></a><ul id="ul13784311414"><li>包年/包月</li><li>按需计费</li></ul>
    </div>
    </td>
    </tr>
    <tr id="row1911919311411"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p114215315410"><a name="p114215315410"></a><a name="p114215315410"></a>当前区域</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p91671331642"><a name="p91671331642"></a><a name="p91671331642"></a>选择区域。</p>
    </td>
    </tr>
    <tr id="row151887316415"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p820483116419"><a name="p820483116419"></a><a name="p820483116419"></a>可用分区</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p72215312414"><a name="p72215312414"></a><a name="p72215312414"></a>可用区域是使用独立电源和网络资源的物理区域。通过内部网络互联，再以物理方式进行隔离，提高了应用程序的可用性。建议您在不同的可用区域下创建集群。</p>
    <p id="p924373118417"><a name="p924373118417"></a><a name="p924373118417"></a>选择集群工作区域下关联的可用区域。集群工作区域在工具菜单处选择，目前工作区域支持“<span id="text92590312417"><a name="text92590312417"></a><a name="text92590312417"></a>华北-北京一</span>”和“<span id="text1927023114410"><a name="text1927023114410"></a><a name="text1927023114410"></a>华东-上海二</span>”。各工作区域下关联的可用区域如下：</p>
    <a name="ul8278531845"></a><a name="ul8278531845"></a><ul id="ul8278531845"><li><span id="text11309103113419"><a name="text11309103113419"></a><a name="text11309103113419"></a>华北-北京一</span>：可用区1、可用区2</li><li><span id="text633815311249"><a name="text633815311249"></a><a name="text633815311249"></a>华东-上海二</span>：可用区1、可用区2、可用区3</li></ul>
    </td>
    </tr>
    <tr id="row1535614313414"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p93781231444"><a name="p93781231444"></a><a name="p93781231444"></a>集群名称</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p039710311949"><a name="p039710311949"></a><a name="p039710311949"></a>集群名称，集群名称不允许相同。</p>
    <p id="p44071531149"><a name="p44071531149"></a><a name="p44071531149"></a>只能由字母、数字、中划线和下划线组成，并且长度为1～64个字符。</p>
    <p id="p164150310417"><a name="p164150310417"></a><a name="p164150310417"></a>默认名称为mrs_xxxx，xxxx为字母和数字的四位随机组合数，系统自动组合。</p>
    </td>
    </tr>
    <tr id="row84261315415"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p1244412311849"><a name="p1244412311849"></a><a name="p1244412311849"></a>集群版本</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p1246223115415"><a name="p1246223115415"></a><a name="p1246223115415"></a>目前支持MRS 1.5.1、MRS 1.6.3、MRS 1.7.2、MRS 1.8.0、MRS 1.8.1版本。默认值为当前最新版本。</p>
    </td>
    </tr>
    <tr id="row752713117411"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p1454017319410"><a name="p1454017319410"></a><a name="p1454017319410"></a>Kerberos认证</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p105561231745"><a name="p105561231745"></a><a name="p105561231745"></a>登录MRS Manager管理页面时是否启用Kerberos认证。</p>
    <a name="ul105644311418"></a><a name="ul105644311418"></a><ul id="ul105644311418"><li><a name="image15890317417"></a><a name="image15890317417"></a><span><img id="image15890317417" src="figures/zh-cn_image_0116051050.png"></span>：<span class="parmname" id="parmname16188314418"><a name="parmname16188314418"></a><a name="parmname16188314418"></a>“Kerberos认证”</span>关闭时，用户可使用MRS集群的所有功能。建议单用户场景下使用。关闭Kerberos认证的集群，用户可以直接访问MRS的集群管理页面和组件，无需安全认证。不启用Kerberos认证时的安全配置建议请参见<a href="集群（未启用Kerberos认证）安全配置建议.md">集群（未启用Kerberos认证）安全配置建议</a>。</li><li><a name="image96414319417"></a><a name="image96414319417"></a><span><img id="image96414319417" src="figures/zh-cn_image_0116051087.png"></span>：<span class="parmname" id="parmname2066919310420"><a name="parmname2066919310420"></a><a name="parmname2066919310420"></a>“Kerberos认证”</span>开启时，普通用户无权限使用MRS集群的<span class="menucascade" id="menucascade126771431240"><a name="menucascade126771431240"></a><a name="menucascade126771431240"></a>“<span class="uicontrol" id="uicontrol868610311042"><a name="uicontrol868610311042"></a><a name="uicontrol868610311042"></a>文件管理</span>”</span>和<span class="menucascade" id="menucascade186951831649"><a name="menucascade186951831649"></a><a name="menucascade186951831649"></a>“<span class="uicontrol" id="uicontrol670523119417"><a name="uicontrol670523119417"></a><a name="uicontrol670523119417"></a>作业管理</span>”</span>功能，并且无法查看Hadoop、Spark的作业记录以及集群资源使用情况。如果需要使用集群更多功能，需要找MRS Manager的管理员分配权限。建议在多用户场景下使用。</li></ul>
    <p id="p15715131349"><a name="p15715131349"></a><a name="p15715131349"></a>通过单击<a name="image772393117412"></a><a name="image772393117412"></a><span><img id="image772393117412" src="figures/zh-cn_image_0116051104.png"></span>或<a name="image8758631147"></a><a name="image8758631147"></a><span><img id="image8758631147" src="figures/zh-cn_image_0116051116.png"></span>来关闭或开启Kerberos认证。</p>
    <p id="p1079210311346"><a name="p1079210311346"></a><a name="p1079210311346"></a>用户在创建了支持Kerberos认证的MRS集群之后，可以使用MRS Manager管理运行中的集群。用户需要在公有云平台上准备一个工作环境，以访问Manager。具体操作请参见<a href="访问支持Kerberos认证的Manager.md">访问支持Kerberos认证的Manager</a>。</p>
    <div class="note" id="note28111931746"><a name="note28111931746"></a><a name="note28111931746"></a><span class="notetitle"> 说明： </span><div class="notebody"><p id="p584016317410"><a name="p584016317410"></a><a name="p584016317410"></a>当用户具备MRS安全模式的权限时，<span class="parmname" id="parmname1684963115410"><a name="parmname1684963115410"></a><a name="parmname1684963115410"></a>“Kerberos认证”</span>、<span class="parmname" id="parmname158577318412"><a name="parmname158577318412"></a><a name="parmname158577318412"></a>“用户名”</span>、<span class="parmname" id="parmname686315311648"><a name="parmname686315311648"></a><a name="parmname686315311648"></a>“密码”</span>和<span class="parmname" id="parmname087183118413"><a name="parmname087183118413"></a><a name="parmname087183118413"></a>“确认密码”</span>参数才显示。</p>
    </div></div>
    </td>
    </tr>
    <tr id="row48778317418"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p48936318415"><a name="p48936318415"></a><a name="p48936318415"></a>用户名</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p7909531944"><a name="p7909531944"></a><a name="p7909531944"></a>MRS Manager管理员用户，目前默认为<strong id="b9918133118419"><a name="b9918133118419"></a><a name="b9918133118419"></a>admin</strong>用户。</p>
    <p id="p159267311845"><a name="p159267311845"></a><a name="p159267311845"></a>仅当<span class="parmname" id="parmname159342311414"><a name="parmname159342311414"></a><a name="parmname159342311414"></a>“Kerberos认证”</span>配置为<span class="parmvalue" id="parmvalue09415311048"><a name="parmvalue09415311048"></a><a name="parmvalue09415311048"></a>“开启”</span>：<a name="image1494610312048"></a><a name="image1494610312048"></a><span><img id="image1494610312048" src="figures/zh-cn_image_0116051132.png"></span>时需要配置此参数。</p>
    </td>
    </tr>
    <tr id="row1197653118410"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p69891931544"><a name="p69891931544"></a><a name="p69891931544"></a>密码</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p255329417"><a name="p255329417"></a><a name="p255329417"></a>配置MRS Manager管理员用户的密码。</p>
    <p id="p41217328411"><a name="p41217328411"></a><a name="p41217328411"></a>需要满足：</p>
    <a name="ul1821632346"></a><a name="ul1821632346"></a><ul id="ul1821632346"><li>密码长度应在8～32个字符之间</li><li>必须包含如下5种中至少3种字符的组合<a name="ul75923215416"></a><a name="ul75923215416"></a><ul id="ul75923215416"><li>至少一个小写字母</li><li>至少一个大写字母</li><li>至少一个数字</li><li>至少一个特殊字符：`~!@#$%^&amp;*()-_=+\|[{}];:'",&lt;.&gt;/?</li><li>空格</li></ul>
    </li><li>不能和用户名一样</li><li>不能和用户名的倒写一样</li></ul>
    <p id="p21731321244"><a name="p21731321244"></a><a name="p21731321244"></a>安全程度：颜色条红、橙、绿分别表示密码安全强度弱、中、强。</p>
    <p id="p11179183212419"><a name="p11179183212419"></a><a name="p11179183212419"></a>仅当<span class="parmname" id="parmname1718815321946"><a name="parmname1718815321946"></a><a name="parmname1718815321946"></a>“Kerberos认证”</span>配置为<span class="parmvalue" id="parmvalue61945321346"><a name="parmvalue61945321346"></a><a name="parmvalue61945321346"></a>“开启”</span>：<a name="image1320483210414"></a><a name="image1320483210414"></a><span><img id="image1320483210414" src="figures/zh-cn_image_0116051142.png"></span>时需要配置此参数。</p>
    </td>
    </tr>
    <tr id="row1323953210419"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p13254103217410"><a name="p13254103217410"></a><a name="p13254103217410"></a>确认密码</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p16271123214412"><a name="p16271123214412"></a><a name="p16271123214412"></a>再次输入MRS Manager管理员用户的密码。</p>
    <p id="p16278432645"><a name="p16278432645"></a><a name="p16278432645"></a>仅当<span class="parmname" id="parmname15285133212417"><a name="parmname15285133212417"></a><a name="parmname15285133212417"></a>“Kerberos认证”</span>配置为<span class="parmvalue" id="parmvalue329363215412"><a name="parmvalue329363215412"></a><a name="parmvalue329363215412"></a>“开启”</span>：<a name="image1930312326412"></a><a name="image1930312326412"></a><span><img id="image1930312326412" src="figures/zh-cn_image_0116051150.png"></span>时需要配置此参数。</p>
    </td>
    </tr>
    <tr id="row1634414321244"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p2359153217418"><a name="p2359153217418"></a><a name="p2359153217418"></a>集群类型</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><div class="p" id="p3367173216419"><a name="p3367173216419"></a><a name="p3367173216419"></a>提供两种集群类型：<a name="ul4374932448"></a><a name="ul4374932448"></a><ul id="ul4374932448"><li>分析集群：用来做离线数据分析，提供的是Hadoop体系的组件。</li><li>流式集群：用来做流处理任务，提供的是流式处理组件。</li></ul>
    </div>
    <div class="note" id="note174369323412"><a name="note174369323412"></a><a name="note174369323412"></a><span class="notetitle"> 说明： </span><div class="notebody"><p id="p446823214410"><a name="p446823214410"></a><a name="p446823214410"></a>MRS流式集群不支持<span class="parmname" id="parmname17477932048"><a name="parmname17477932048"></a><a name="parmname17477932048"></a>“作业管理”</span>和<span class="parmname" id="parmname84869321948"><a name="parmname84869321948"></a><a name="parmname84869321948"></a>“文件管理”</span>功能。</p>
    </div></div>
    </td>
    </tr>
    <tr id="row7502232549"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p14518132049"><a name="p14518132049"></a><a name="p14518132049"></a>组件选择</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p1753414321947"><a name="p1753414321947"></a><a name="p1753414321947"></a>MRS 1.6.3版本配套的组件如下：</p>
    <div class="p" id="p953483220415"><a name="p953483220415"></a><a name="p953483220415"></a>分析集群组件<a name="ul1554312329417"></a><a name="ul1554312329417"></a><ul id="ul1554312329417"><li>Hadoop 2.7.2：分布式系统基础架构</li><li>Spark 2.1.0：内存分布式系统框架</li><li>Hive <span id="text1460114321411"><a name="text1460114321411"></a><a name="text1460114321411"></a>1.2.1</span>：建立在Hadoop上的数据仓库框架</li><li>HBase 1.3.1：分布式列数据库</li><li>Hue <span id="text2643032243"><a name="text2643032243"></a><a name="text2643032243"></a>3.11.0</span>：提供Hadoop UI能力，让用户通过浏览器分析处理Hadoop集群数据</li><li>Loader <span id="text1366710329420"><a name="text1366710329420"></a><a name="text1366710329420"></a>2.0.0</span>：基于开源sqoop 1.99.7开发，专为Apache Hadoop和结构化数据库（如关系型数据库）设计的高效传输大量数据的工具。<p id="p116757321642"><a name="p116757321642"></a><a name="p116757321642"></a>Hadoop为必选组件，且Spark与Hive组件需要配套使用。请根据业务选择搭配组件。</p>
    </li></ul>
    </div>
    <div class="p" id="p96762321540"><a name="p96762321540"></a><a name="p96762321540"></a>流式集群组件<a name="ul186831032347"></a><a name="ul186831032347"></a><ul id="ul186831032347"><li>Kafka <span id="text1170817322420"><a name="text1170817322420"></a><a name="text1170817322420"></a>0.10.0.0</span>：提供分布式消息订阅的系统。</li><li>Storm <span id="text373733213413"><a name="text373733213413"></a><a name="text373733213413"></a>1.0.2</span>：提供分布式实时计算的系统。</li><li>Flume <span id="text187675325417"><a name="text187675325417"></a><a name="text187675325417"></a>1.6.0</span>：提供分布式、高可用、高可靠的海量日志采集、聚合和传输系统。</li></ul>
    </div>
    </td>
    </tr>
    <tr id="row777713329415"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p11793163212410"><a name="p11793163212410"></a><a name="p11793163212410"></a>虚拟私有云</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p108102321547"><a name="p108102321547"></a><a name="p108102321547"></a>VPC即虚拟私有云，是通过逻辑方式进行网络隔离，提供安全、隔离的网络环境。</p>
    <p id="p17818432449"><a name="p17818432449"></a><a name="p17818432449"></a>选择需要创建集群的VPC，单击<span class="uicontrol" id="uicontrol14826133210417"><a name="uicontrol14826133210417"></a><a name="uicontrol14826133210417"></a>“查看虚拟私有云”</span>进入VPC服务查看已创建的VPC名称和ID。如果没有VPC，需要创建一个新的VPC。</p>
    </td>
    </tr>
    <tr id="row1283843215417"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p6857732444"><a name="p6857732444"></a><a name="p6857732444"></a>子网</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p178759328410"><a name="p178759328410"></a><a name="p178759328410"></a>通过子网提供与其他网络隔离的、可以独享的网络资源，以提高网络安全。</p>
    <p id="p1688283211415"><a name="p1688283211415"></a><a name="p1688283211415"></a>选择需要创建集群的子网，可进入VPC服务查看VPC下已创建的子网名称和ID。若VPC下未创建子网，请单击<span class="uicontrol" id="uicontrol1893113214420"><a name="uicontrol1893113214420"></a><a name="uicontrol1893113214420"></a>“创建子网”</span>进行创建。</p>
    <div class="notice" id="note690120321449"><a name="note690120321449"></a><a name="note690120321449"></a><span class="noticetitle"> 注意： </span><div class="noticebody"><p id="p109422321246"><a name="p109422321246"></a><a name="p109422321246"></a>请勿将子网和网络ACL关联。</p>
    </div></div>
    </td>
    </tr>
    <tr id="row10959103214416"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p129798321144"><a name="p129798321144"></a><a name="p129798321144"></a>安全组</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p159997321846"><a name="p159997321846"></a><a name="p159997321846"></a>安全组是一组对弹性云服务器的访问规则的集合，为同一个VPC内具有相同安全保护需求并相互信任的弹性云服务器提供访问策略。</p>
    <p id="p9914334410"><a name="p9914334410"></a><a name="p9914334410"></a>用户创建集群时，可自动创建安全组，也可选择下拉框中已有的安全组。</p>
    </td>
    </tr>
    <tr id="row1918163317411"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p1138113319410"><a name="p1138113319410"></a><a name="p1138113319410"></a>集群高可用</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p6561331543"><a name="p6561331543"></a><a name="p6561331543"></a>是否开启集群高可用，默认开启。</p>
    <p id="p12655333416"><a name="p12655333416"></a><a name="p12655333416"></a>启用高可用特性时，所有组件的管理进程将会部署在两个master节点上，实现双机热备，防止单机故障，提高可靠性。当关闭高可用特性时，所有组件的管理进程只会部署在一个master节点上，当某个组件的进程出现异常时，该组件将无法提供服务。</p>
    <a name="ul10721331045"></a><a name="ul10721331045"></a><ul id="ul10721331045"><li><a name="image1110043317416"></a><a name="image1110043317416"></a><span><img id="image1110043317416" src="figures/zh-cn_image_0116051162.png"></span>：<span class="parmname" id="parmname111359331419"><a name="parmname111359331419"></a><a name="parmname111359331419"></a>“集群高可用”</span>关闭时，Master节点实例数量固定为1个，Core节点实例数量默认为3个，最小可调整为1个。</li><li><a name="image19162433848"></a><a name="image19162433848"></a><span><img id="image19162433848" src="figures/zh-cn_image_0116051170.png"></span>：<span class="parmname" id="parmname142101433642"><a name="parmname142101433642"></a><a name="parmname142101433642"></a>“集群高可用”</span>开启时，Master节点实例数量固定为2个，Core节点实例数量默认为3个，最小可调整为1个。</li></ul>
    <p id="p822383314418"><a name="p822383314418"></a><a name="p822383314418"></a>通过单击<a name="image523514331417"></a><a name="image523514331417"></a><span><img id="image523514331417" src="figures/zh-cn_image_0116051198.png"></span>或<a name="image1627812331444"></a><a name="image1627812331444"></a><span><img id="image1627812331444" src="figures/zh-cn_image_0116051209.png"></span>来关闭或开启集群高可用。</p>
    </td>
    </tr>
    </tbody>
    </table>

    **表 12**  集群节点信息

    <a name="table8318113318419"></a>
    <table><thead align="left"><tr id="row19366733344"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.3.1.1"><p id="p738523317418"><a name="p738523317418"></a><a name="p738523317418"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="80%" id="mcps1.2.3.1.2"><p id="p10405153310414"><a name="p10405153310414"></a><a name="p10405153310414"></a>参数说明</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row2424113315413"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p1244010335416"><a name="p1244010335416"></a><a name="p1244010335416"></a>类型</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p045613331847"><a name="p045613331847"></a><a name="p045613331847"></a>MRS提供节点类型：</p>
    <a name="ul18467633548"></a><a name="ul18467633548"></a><ul id="ul18467633548"><li>Master：指集群Master节点，负责管理集群，协调将集群可执行文件分配到Core节点。此外，还会跟踪每个作业的执行状态，监控DataNode的运行状况。</li><li>Core：指集群Core节点，处理数据并在HDFS中存储过程数据。</li><li>Task：指集群Task节点，主要用于计算，不存放持久数据。主要安装Yarn、Storm组件。Task节点为可选节点，数目可以是零。（MRS 1.6.0及以上版本支持。）<p id="p175337331947"><a name="p175337331947"></a><a name="p175337331947"></a>当集群数据量变化不大而集群业务处理能力需求变化比较大，大的业务处理能力只是临时需要，此时选择添加Task节点。</p>
    <a name="ul15414331149"></a><a name="ul15414331149"></a><ul id="ul15414331149"><li>临时业务量增大，如年底报表处理。</li><li>需要在短时间内处理完原来需要处理很久的任务，如一些紧急分析任务。</li></ul>
    </li></ul>
    </td>
    </tr>
    <tr id="row1358318331443"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p186011331649"><a name="p186011331649"></a><a name="p186011331649"></a>添加Task节点（可选配置）</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p861719331343"><a name="p861719331343"></a><a name="p861719331343"></a>单击“添加Task节点”，配置Task节点信息。</p>
    <p id="p86265331549"><a name="p86265331549"></a><a name="p86265331549"></a>目前仅当创建按需计费集群时，单击“Task”所在行“关闭”后的 <a name="image11633173314416"></a><a name="image11633173314416"></a><span><img id="image11633173314416" src="figures/zh-cn_image_0116051274.gif"></span>，进入“弹性伸缩”页面，可启用弹性伸缩策略，详细操作请参见 <a href="弹性伸缩集群.md">弹性伸缩集群</a>。</p>
    </td>
    </tr>
    <tr id="row364823320411"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p367711331349"><a name="p367711331349"></a><a name="p367711331349"></a>实例规格</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><a name="ul1173363311412"></a><a name="ul1173363311412"></a>
    <p id="p182123359411"><a name="p182123359411"></a><a name="p182123359411"></a>选择主节点和核心节点的实例规格。MRS当前支持主机规格的配型由CPU+内存+Disk共同决定。</p>
    <a name="ul172201235342"></a><a name="ul172201235342"></a><ul id="ul172201235342"><li><span id="text02459355416"><a name="text02459355416"></a><a name="text02459355416"></a>华北-北京一</span>、<span id="text1925413356415"><a name="text1925413356415"></a><a name="text1925413356415"></a>华东-上海二</span>的工作区域里 MRS 1.6.3版本支持的实例规格详细说明请参见<a href="MRS所使用的弹性云服务器规格.md">MRS所使用的弹性云服务器规格</a>。</li></ul>
    <div class="note" id="note98051356413"><a name="note98051356413"></a><a name="note98051356413"></a><span class="notetitle"> 说明： </span><div class="notebody"><a name="ul1184333511419"></a><a name="ul1184333511419"></a><ul id="ul1184333511419"><li>节点的实例规格配置越高，数据处理分析能力越强，集群所需费用也越高。</li><li>当Core节点规格选择d2.4xlarge.8、d2.8xlarge.8，<span class="parmvalue" id="parmvalue2091918352418"><a name="parmvalue2091918352418"></a><a name="parmvalue2091918352418"></a>“存储空间”</span>参数不显示。因HDD类型虚拟机，会携带数据磁盘，而普通非HDD类型的虚拟机，不会携带数据磁盘，以致需要用户添加磁盘存储空间。</li><li>当Core节点规格选择为HDD磁盘时，MRS无需为数据磁盘付费，但ECS需要为此付费。</li><li>当Core节点规格选择HDD磁盘时，Master节点和Core节点的系统磁盘大小为40GB，或者Master节点的数据磁盘大小为200GB，它们都称为SATA磁盘。</li><li>当Core节点规格选择非HDD磁盘时，Master节点和Core节点的磁盘类型取决于数据磁盘。</li><li>Master节点中的4核8GB规格不在SLA售后范围内，仅适用于测试环境，不建议用于生产环境。</li></ul>
    </div></div>
    </td>
    </tr>
    <tr id="row169702351946"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p498615352418"><a name="p498615352418"></a><a name="p498615352418"></a>数量</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p12111361042"><a name="p12111361042"></a><a name="p12111361042"></a>配置主节点和核心节点的个数。</p>
    <p id="p1498367419"><a name="p1498367419"></a><a name="p1498367419"></a>Master：</p>
    <a name="ul81613361647"></a><a name="ul81613361647"></a><ul id="ul81613361647"><li>开启“集群高可用”时，Master实例数量固定为2个。</li><li>关闭“集群高可用”时，Master实例数量固定为1个。</li></ul>
    <p id="p25033617413"><a name="p25033617413"></a><a name="p25033617413"></a>Core：1～100</p>
    <div class="note" id="note175713361417"><a name="note175713361417"></a><a name="note175713361417"></a><span class="notetitle"> 说明： </span><div class="notebody"><a name="ul1587136747"></a><a name="ul1587136747"></a><ul id="ul1587136747"><li>Core节点默认的最大值为100，如果用户需要的Core节点数大于100，可以联系技术支持人员或者调用后台接口修改数据库。</li><li>过小的节点容量会导致您的集群运行缓慢，而过大的节点容量会产生不必要的成本，请根据您要处理的数据对集群节点数量进行调整。</li></ul>
    </div></div>
    </td>
    </tr>
    <tr id="row141235364419"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p1013523610412"><a name="p1013523610412"></a><a name="p1013523610412"></a>存储空间</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p61515361744"><a name="p61515361744"></a><a name="p61515361744"></a>Core节点数据磁盘存储空间。为增大数据存储容量，创建集群时可同时购买磁盘，有如下应用场景：</p>
    <a name="ul61576361843"></a><a name="ul61576361843"></a><ul id="ul61576361843"><li>数据存储和计算分离，数据存储在OBS中，集群存储成本低，存储量不受限制，并且集群可以随时删除，但计算性能取决于OBS访问性能，相对HDFS有所下降，建议在数据计算不频繁场景下使用。</li><li>数据存储和计算不分离，数据存储在HDFS中，集群成本较高，计算性能高，但存储量受磁盘空间限制，删除集群前需将数据导出保存，建议在数据计算频繁场景下使用。</li></ul>
    <p id="p1197436544"><a name="p1197436544"></a><a name="p1197436544"></a>目前支持SATA、SAS和SSD存储类型：</p>
    <a name="ul8586164210139"></a><a name="ul8586164210139"></a><ul id="ul8586164210139"><li>SATA：普通IO</li><li>SAS：高IO</li><li>SSD：超高IO</li></ul>
    <p id="p62611336543"><a name="p62611336543"></a><a name="p62611336543"></a>取值范围：100GB～32000GB</p>
    <div class="note" id="note1268123617415"><a name="note1268123617415"></a><a name="note1268123617415"></a><span class="notetitle"> 说明： </span><div class="notebody"><a name="ul13294936349"></a><a name="ul13294936349"></a><ul id="ul13294936349"><li>创建的节点个数越多，对管理节点（即master节点）的硬盘容量要求越高。为了保证集群能够健康地运行，当创建的节点个数达到300时，建议将master的硬盘容量配置成600GB以上；当创建的节点个数达到500时，建议将master的硬盘容量配置成1TB以上。</li><li>Master节点自动为MRS Manager增加数据磁盘存储空间，硬盘类型与Core节点数据磁盘类型相同，但磁盘空间默认为200GB且不支持修改。</li><li>当Core节点规格选择d1.4xlarge、d2.4xlarge.8、d2.8xlarge.8，<span class="parmvalue" id="parmvalue1740843611412"><a name="parmvalue1740843611412"></a><a name="parmvalue1740843611412"></a>“存储空间”</span>参数不显示。</li></ul>
    </div></div>
    </td>
    </tr>
    </tbody>
    </table>

    **表 13**  登录信息

    <a name="table44251136548"></a>
    <table><thead align="left"><tr id="row194741361546"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.3.1.1"><p id="p1348913367413"><a name="p1348913367413"></a><a name="p1348913367413"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="80%" id="mcps1.2.3.1.2"><p id="p1650319363420"><a name="p1650319363420"></a><a name="p1650319363420"></a>参数说明</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row752113613420"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p13535103611413"><a name="p13535103611413"></a><a name="p13535103611413"></a>登录方式</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><a name="ul18552436444"></a><a name="ul18552436444"></a><ul id="ul18552436444"><li>密码<p id="p4580153610414"><a name="p4580153610414"></a><a name="p4580153610414"></a>使用密码方式登录ECS节点。</p>
    <p id="p1758916369419"><a name="p1758916369419"></a><a name="p1758916369419"></a>密码设置约束如下：</p>
    <a name="ol4598936642"></a><a name="ol4598936642"></a><ol id="ol4598936642"><li>字符串类型，可输入的字符串长度为8-26。</li><li>至少包含三种字符组合，如大写字母，小写字母，数字，特殊字符（!@$%^-_=+[{}]:\,./?），但不能包含空格。</li><li>不能与用户名或者倒序用户名相同。<div class="note" id="note96709361448"><a name="note96709361448"></a><a name="note96709361448"></a><span class="notetitle"> 说明： </span><div class="notebody"><p id="p17680113611415"><a name="p17680113611415"></a><a name="p17680113611415"></a>仅1.6.2及以上版本支持密码登录方式。</p>
    </div></div>
    </li></ol>
    </li><li>密钥对</li></ul>
    <p id="p167091836346"><a name="p167091836346"></a><a name="p167091836346"></a>使用密钥方式登录集群ECS节点。从下拉框中选择密钥对，如果已获取私钥文件，请勾选“我确认已获取该密钥对中的私钥文件<i><span class="varname" id="varname127191636743"><a name="varname127191636743"></a><a name="varname127191636743"></a>SSHkey-bba1.pem</span></i>，否则无法登录弹性云服务器”。如果没有创建密钥对，请单击<span class="uicontrol" id="uicontrol19728436343"><a name="uicontrol19728436343"></a><a name="uicontrol19728436343"></a>“查看密钥对”</span>创建或导入密钥，然后再获取私钥文件。</p>
    <p id="p773623613410"><a name="p773623613410"></a><a name="p773623613410"></a>密钥对即SSH密钥，包含SSH公钥和私钥。您可以新建一个SSH密钥，并下载私钥用于远程登录身份认证。为保证安全，私钥只能下载一次，请妥善保管。</p>
    <p id="p774517361542"><a name="p774517361542"></a><a name="p774517361542"></a>您可以通过以下两种方式中的任意一种使用SSH密钥。</p>
    <a name="ol2075413610414"></a><a name="ol2075413610414"></a><ol id="ol2075413610414"><li>创建SSH密钥：创建SSH密钥，同时会创建公钥和私钥，公钥保存在ECS系统中，私钥保存在用户本机。当登录弹性云服务器时，使用公钥和私钥进行鉴权。</li><li>导入SSH密钥：当用户已有公钥和私钥，可以选择将公钥导入系统。当登录弹性云服务器时，使用公钥和私钥进行鉴权。</li></ol>
    </td>
    </tr>
    </tbody>
    </table>

    **表 14**  日志管理信息

    <a name="table124554818393"></a>
    <table><thead align="left"><tr id="row432064813916"><th class="cellrowborder" valign="top" width="19.919999999999998%" id="mcps1.2.3.1.1"><p id="p234615489399"><a name="p234615489399"></a><a name="p234615489399"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="80.08%" id="mcps1.2.3.1.2"><p id="p936810489396"><a name="p936810489396"></a><a name="p936810489396"></a>参数说明</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row1739194873916"><td class="cellrowborder" valign="top" width="19.919999999999998%" headers="mcps1.2.3.1.1 "><p id="p154101148123914"><a name="p154101148123914"></a><a name="p154101148123914"></a>日志记录</p>
    </td>
    <td class="cellrowborder" valign="top" width="80.08%" headers="mcps1.2.3.1.2 "><p id="p3453948133911"><a name="p3453948133911"></a><a name="p3453948133911"></a>租户是否开启日志收集功能。</p>
    <a name="ul1546420488393"></a><a name="ul1546420488393"></a><ul id="ul1546420488393"><li><a name="image1850119484395"></a><a name="image1850119484395"></a><span><img id="image1850119484395" src="figures/zh-cn_image_0130584925.png"></span> ：开启</li><li><a name="image35761348143910"></a><a name="image35761348143910"></a><span><img id="image35761348143910" src="figures/zh-cn_image_0130584933.png"></span>：关闭</li></ul>
    <p id="p18618114818396"><a name="p18618114818396"></a><a name="p18618114818396"></a>通过单击<a name="image1763004818399"></a><a name="image1763004818399"></a><span><img id="image1763004818399" src="figures/zh-cn_image_0130584941.png"></span>或<a name="image06770481395"></a><a name="image06770481395"></a><span><img id="image06770481395" src="figures/zh-cn_image_0130584949.png"></span>来关闭或开启日志收集功能。</p>
    <p id="p139851474119"><a name="p139851474119"></a><a name="p139851474119"></a>说明：该参数仅在MRS 1.7.1及之前版本有效。</p>
    </td>
    </tr>
    <tr id="row272613488393"><td class="cellrowborder" valign="top" width="19.919999999999998%" headers="mcps1.2.3.1.1 "><p id="p187531648133914"><a name="p187531648133914"></a><a name="p187531648133914"></a>OBS桶</p>
    </td>
    <td class="cellrowborder" valign="top" width="80.08%" headers="mcps1.2.3.1.2 "><p id="p15798164812392"><a name="p15798164812392"></a><a name="p15798164812392"></a>日志收集后存放的路径。</p>
    <p id="p20808114823915"><a name="p20808114823915"></a><a name="p20808114823915"></a>例如s3a://mrs-log-a3859af76b874760969cd24f2640bbb4-northchina</p>
    <p id="p5841114813916"><a name="p5841114813916"></a><a name="p5841114813916"></a>勾选<span class="parmvalue" id="parmvalue1585254816393"><a name="parmvalue1585254816393"></a><a name="parmvalue1585254816393"></a>“我确认OBS桶s3a://mrs-log-a3859af76b874760969cd24f2640bbb4-northchina将被创建，该桶仅用于MRS集群创建失败日志收集。”</span></p>
    <p id="p1386464873910"><a name="p1386464873910"></a><a name="p1386464873910"></a>用户创建了支持日志记录的MRS集群，当集群创建失败时，可以使用OBS服务下载日志来诊断问题。</p>
    <p id="p12880248103916"><a name="p12880248103916"></a><a name="p12880248103916"></a>操作步骤：</p>
    <a name="ol4891748143912"></a><a name="ol4891748143912"></a><ol id="ol4891748143912"><li>登录OBS管理控制台。</li><li>在桶列表中选择<span class="filepath" id="filepath1963184813391"><a name="filepath1963184813391"></a><a name="filepath1963184813391"></a>“mrs-log-&lt;tenant_id&gt;-&lt;region_id&gt;”</span>桶<em id="i89751048133916"><a name="i89751048133916"></a><a name="i89751048133916"></a>，</em>进入<span class="filepath" id="filepath199841348153910"><a name="filepath199841348153910"></a><a name="filepath199841348153910"></a>“/&lt;cluster_id&gt;/install_log”</span>文件夹，下载<span class="filepath" id="filepath29955484392"><a name="filepath29955484392"></a><a name="filepath29955484392"></a>“YYYYMMDDHHMMSS.tar.gz”</span>日志。<p id="p092329192212"><a name="p092329192212"></a><a name="p092329192212"></a>如/mrs-log-a3859af76b874760969cd24f2640bbb4-northchina/65d0a20f-bcb7-4da3-81d3-71fef12d993d/20170818091516.tar.gz。</p>
    </li></ol>
    <p id="p19579328124114"><a name="p19579328124114"></a><a name="p19579328124114"></a>说明：该参数仅在MRS 1.7.1及之前版本有效。</p>
    </td>
    </tr>
    </tbody>
    </table>

    **表 15**  购买时长配置

    <a name="table1287517476547"></a>
    <table><thead align="left"><tr id="row997510471547"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.3.1.1"><p id="p1233204818546"><a name="p1233204818546"></a><a name="p1233204818546"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="80%" id="mcps1.2.3.1.2"><p id="p569104814547"><a name="p569104814547"></a><a name="p569104814547"></a>参数说明</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row1108174825415"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p01491448195412"><a name="p01491448195412"></a><a name="p01491448195412"></a>购买时长</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p9184184845410"><a name="p9184184845410"></a><a name="p9184184845410"></a>包年/包月模式下购买集群的时长。最短时长为1个月，最长时长为1年。</p>
    </td>
    </tr>
    </tbody>
    </table>

    **表 16**  高级配置信息

    <a name="table4141519185414"></a>
    <table><thead align="left"><tr id="row7241171911542"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.3.1.1"><p id="p92820191542"><a name="p92820191542"></a><a name="p92820191542"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="80%" id="mcps1.2.3.1.2"><p id="p4315181915545"><a name="p4315181915545"></a><a name="p4315181915545"></a>参数说明</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row63555199543"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p1339231975416"><a name="p1339231975416"></a><a name="p1339231975416"></a>现在配置</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p164291719205420"><a name="p164291719205420"></a><a name="p164291719205420"></a>单击<span class="uicontrol" id="uicontrol8444161919542"><a name="uicontrol8444161919542"></a><a name="uicontrol8444161919542"></a>“现在配置”</span>，呈现添加标签、引导操作。</p>
    <a name="ul48041019103018"></a><a name="ul48041019103018"></a><ul id="ul48041019103018"><li>添加标签具体请参考<a href="管理集群标签.md">管理集群标签</a></li><li>添加引导操作具体请参考<a href="引导操作简介.md">引导操作简介</a></li></ul>
    </td>
    </tr>
    <tr id="row66561919135416"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p26971219115415"><a name="p26971219115415"></a><a name="p26971219115415"></a>暂不配置</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p167351619185410"><a name="p167351619185410"></a><a name="p167351619185410"></a>暂不配置任何信息。</p>
    </td>
    </tr>
    </tbody>
    </table>

4.  单击“立即购买“。
5.  确认集群详情，若选择“包年/包月”集群请单击“提交订单“，若选择“按需计费”集群请单击“提交申请“，成功提交集群创建任务。
6.  单击“返回集群列表”，可以查看到集群创建的状态。

    集群创建的状态过程请参见[表1](集群列表简介.md#table3950169215120)中的“状态”参数说明。

    集群创建需要时间，所创集群的初始状态为“启动中”，创建成功后状态更新为“运行中”，请您耐心等待。

    MRS系统界面支持同一时间并发创建10个集群，且最多支持管理集群100个。

    >![](public_sys-resources/icon-note.gif) **说明：**   
    >当创建集群时，您还可以创建处于Failed或者Terminated状态的同名集群。  


## 创建MRS 1.5.1版本集群<a name="zh-cn_topic_0013363945_section26191365175227"></a>

1.  登录MRS管理控制台。
2.  单击**“购买集群”**，进入**“购买集群”**页面。

    >![](public_sys-resources/icon-note.gif) **说明：**   
    >创建集群时需要注意配额提醒。当资源配额不足时，建议按照提示申请足够的资源，再创建集群。  

3.  参考下列表格配置集群基本信息。

    **表 17**  配置集群基本信息

    <a name="table427763625020"></a>
    <table><thead align="left"><tr id="row1327753612508"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.3.1.1"><p id="p1277183618501"><a name="p1277183618501"></a><a name="p1277183618501"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="80%" id="mcps1.2.3.1.2"><p id="p22783366506"><a name="p22783366506"></a><a name="p22783366506"></a>参数说明</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row1028523655013"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p428611368501"><a name="p428611368501"></a><a name="p428611368501"></a>计费模式</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><div class="p" id="p22861736165010"><a name="p22861736165010"></a><a name="p22861736165010"></a>MRS提供两种计费模式：<a name="ul9286173635017"></a><a name="ul9286173635017"></a><ul id="ul9286173635017"><li>包年/包月</li><li>按需计费</li></ul>
    </div>
    </td>
    </tr>
    <tr id="row202861536175018"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p152869361501"><a name="p152869361501"></a><a name="p152869361501"></a>当前区域</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p182865367503"><a name="p182865367503"></a><a name="p182865367503"></a>选择区域。</p>
    </td>
    </tr>
    <tr id="row102871336165011"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p4287536175013"><a name="p4287536175013"></a><a name="p4287536175013"></a>可用分区</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p528917362507"><a name="p528917362507"></a><a name="p528917362507"></a>可用区域是使用独立电源和网络资源的物理区域。通过内部网络互联，再以物理方式进行隔离，提高了应用程序的可用性。建议您在不同的可用区域下创建集群。</p>
    <p id="p152891636185011"><a name="p152891636185011"></a><a name="p152891636185011"></a>选择集群工作区域下关联的可用区域。集群工作区域在工具菜单处选择，目前工作区域支持“<span id="text0289153610504"><a name="text0289153610504"></a><a name="text0289153610504"></a>华北-北京一</span>”和“<span id="text10289103615012"><a name="text10289103615012"></a><a name="text10289103615012"></a>华东-上海二</span>”。各工作区域下关联的可用区域如下：</p>
    <a name="ul182899368508"></a><a name="ul182899368508"></a><ul id="ul182899368508"><li><span id="text182908363503"><a name="text182908363503"></a><a name="text182908363503"></a>华北-北京一</span>：可用区1、可用区2</li><li><span id="text1129013611508"><a name="text1129013611508"></a><a name="text1129013611508"></a>华东-上海二</span>：可用区1、可用区可用区3</li></ul>
    </td>
    </tr>
    <tr id="row132901536185010"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p182903361509"><a name="p182903361509"></a><a name="p182903361509"></a>集群名称</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p3290193645014"><a name="p3290193645014"></a><a name="p3290193645014"></a>集群名称，集群名称不允许相同。</p>
    <p id="p1729183619508"><a name="p1729183619508"></a><a name="p1729183619508"></a>只能由字母、数字、中划线和下划线组成，并且长度为1～64个字符。</p>
    <p id="p529183655010"><a name="p529183655010"></a><a name="p529183655010"></a>默认名称为mrs_xxxx，xxxx为字母和数字的四位随机组合数，系统自动组合。</p>
    </td>
    </tr>
    <tr id="row1129133613508"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p16291133615508"><a name="p16291133615508"></a><a name="p16291133615508"></a>集群版本</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p22921536195016"><a name="p22921536195016"></a><a name="p22921536195016"></a>目前支持MRS 1.5.1、MRS 1.6.3、MRS 1.7.2、MRS 1.8.0、MRS 1.8.1版本。默认值为当前最新版本。</p>
    </td>
    </tr>
    <tr id="row13293153645014"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p4293193612501"><a name="p4293193612501"></a><a name="p4293193612501"></a>Kerberos认证</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p1229403695018"><a name="p1229403695018"></a><a name="p1229403695018"></a>登录MRS Manager管理页面时是否启用Kerberos认证。</p>
    <a name="ul2029573619502"></a><a name="ul2029573619502"></a><ul id="ul2029573619502"><li><a name="image729533615505"></a><a name="image729533615505"></a><span><img id="image729533615505" src="figures/zh-cn_image_0113700261.png"></span>：<span class="parmname" id="parmname16295163616505"><a name="parmname16295163616505"></a><a name="parmname16295163616505"></a>“Kerberos认证”</span>关闭时，用户可使用MRS集群的所有功能。建议单用户场景下使用。关闭Kerberos认证的集群，用户可以直接访问MRS的集群管理页面和组件，无需安全认证。</li><li><a name="image52961036105012"></a><a name="image52961036105012"></a><span><img id="image52961036105012" src="figures/zh-cn_image_0113700329.png"></span>：<span class="parmname" id="parmname18296936185018"><a name="parmname18296936185018"></a><a name="parmname18296936185018"></a>“Kerberos认证”</span>开启时，普通用户无权限使用MRS集群的<span class="menucascade" id="menucascade82961436155015"><a name="menucascade82961436155015"></a><a name="menucascade82961436155015"></a>“<span class="uicontrol" id="uicontrol429617364503"><a name="uicontrol429617364503"></a><a name="uicontrol429617364503"></a>文件管理</span>”</span>和<span class="menucascade" id="menucascade122967362502"><a name="menucascade122967362502"></a><a name="menucascade122967362502"></a>“<span class="uicontrol" id="uicontrol42961136205020"><a name="uicontrol42961136205020"></a><a name="uicontrol42961136205020"></a>作业管理</span>”</span>功能，并且无法查看Hadoop、Spark的作业记录以及集群资源使用情况。如果需要使用集群更多功能，需要找MRS Manager的管理员分配权限。建议在多用户场景下使用。</li></ul>
    <p id="p02961036105014"><a name="p02961036105014"></a><a name="p02961036105014"></a>通过单击<a name="image1029693675018"></a><a name="image1029693675018"></a><span><img id="image1029693675018" src="figures/zh-cn_image_0113700338.png"></span>或<a name="image329623612504"></a><a name="image329623612504"></a><span><img id="image329623612504" src="figures/zh-cn_image_0113700380.png"></span>来关闭或开启Kerberos认证。</p>
    <p id="p18296436135019"><a name="p18296436135019"></a><a name="p18296436135019"></a>用户在创建了支持Kerberos认证的MRS集群之后，可以使用MRS Manager管理运行中的集群。用户需要在公有云平台上准备一个工作环境，以访问Manager。具体操作请参见<a href="访问支持Kerberos认证的Manager.md">访问支持Kerberos认证的Manager</a>。</p>
    <div class="note" id="note629714362504"><a name="note629714362504"></a><a name="note629714362504"></a><span class="notetitle"> 说明： </span><div class="notebody"><p id="p630017367502"><a name="p630017367502"></a><a name="p630017367502"></a>当用户具备MRS安全模式的权限时，<span class="parmname" id="parmname7300123611505"><a name="parmname7300123611505"></a><a name="parmname7300123611505"></a>“Kerberos认证”</span>、<span class="parmname" id="parmname13300183675012"><a name="parmname13300183675012"></a><a name="parmname13300183675012"></a>“用户名”</span>、<span class="parmname" id="parmname6300153625014"><a name="parmname6300153625014"></a><a name="parmname6300153625014"></a>“密码”</span>和<span class="parmname" id="parmname1630123613505"><a name="parmname1630123613505"></a><a name="parmname1630123613505"></a>“确认密码”</span>参数才显示。</p>
    </div></div>
    </td>
    </tr>
    <tr id="row1301113620506"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p14301636195013"><a name="p14301636195013"></a><a name="p14301636195013"></a>用户名</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p83022363508"><a name="p83022363508"></a><a name="p83022363508"></a>MRS Manager管理员用户，目前默认为<strong id="b1530283610507"><a name="b1530283610507"></a><a name="b1530283610507"></a>admin</strong>用户。</p>
    <p id="p11302163685013"><a name="p11302163685013"></a><a name="p11302163685013"></a>仅当<span class="parmname" id="parmname1302636145017"><a name="parmname1302636145017"></a><a name="parmname1302636145017"></a>“Kerberos认证”</span>配置为<span class="parmvalue" id="parmvalue030310366506"><a name="parmvalue030310366506"></a><a name="parmvalue030310366506"></a>“开启”</span>：<a name="image14303133611509"></a><a name="image14303133611509"></a><span><img id="image14303133611509" src="figures/zh-cn_image_0113700388.png"></span>。</p>
    </td>
    </tr>
    <tr id="row1930483613507"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p63041936165019"><a name="p63041936165019"></a><a name="p63041936165019"></a>密码</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p1030563618508"><a name="p1030563618508"></a><a name="p1030563618508"></a>配置MRS Manager管理员用户的密码。</p>
    <p id="p93055364501"><a name="p93055364501"></a><a name="p93055364501"></a>需要满足：</p>
    <a name="ul1330573611507"></a><a name="ul1330573611507"></a><ul id="ul1330573611507"><li>密码长度应在8～32个字符之间</li><li>必须包含如下5种中至少3种字符的组合<a name="ul1230713362502"></a><a name="ul1230713362502"></a><ul id="ul1230713362502"><li>至少一个小写字母</li><li>至少一个大写字母</li><li>至少一个数字</li><li>至少一个特殊字符：`~!@#$%^&amp;*()-_=+\|[{}];:'",&lt;.&gt;/?</li><li>空格</li></ul>
    </li><li>不能和用户名一样</li><li>不能和用户名的倒写一样</li></ul>
    <p id="p930903616502"><a name="p930903616502"></a><a name="p930903616502"></a>安全程度：颜色条红、橙、绿分别表示密码安全强度弱、中、强。</p>
    <p id="p33095369508"><a name="p33095369508"></a><a name="p33095369508"></a>仅当<span class="parmname" id="parmname13309436105012"><a name="parmname13309436105012"></a><a name="parmname13309436105012"></a>“Kerberos认证”</span>配置为<span class="parmvalue" id="parmvalue7310173655014"><a name="parmvalue7310173655014"></a><a name="parmvalue7310173655014"></a>“开启”</span>：<a name="image231063635011"></a><a name="image231063635011"></a><span><img id="image231063635011" src="figures/zh-cn_image_0113700431.png"></span>时需要配置此参数。</p>
    </td>
    </tr>
    <tr id="row13111365505"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p5311103665019"><a name="p5311103665019"></a><a name="p5311103665019"></a>确认密码</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p531214368501"><a name="p531214368501"></a><a name="p531214368501"></a>再次输入MRS Manager管理员用户的密码。</p>
    <p id="p17312153618502"><a name="p17312153618502"></a><a name="p17312153618502"></a>仅当<span class="parmname" id="parmname1331216361503"><a name="parmname1331216361503"></a><a name="parmname1331216361503"></a>“Kerberos认证”</span>配置为<span class="parmvalue" id="parmvalue13312336195011"><a name="parmvalue13312336195011"></a><a name="parmvalue13312336195011"></a>“开启”</span>：<a name="image1531323675014"></a><a name="image1531323675014"></a><span><img id="image1531323675014" src="figures/zh-cn_image_0113700439.png"></span>时需要配置此参数。</p>
    </td>
    </tr>
    <tr id="row43141536135014"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p1031416367505"><a name="p1031416367505"></a><a name="p1031416367505"></a>集群类型</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><div class="p" id="p123169368503"><a name="p123169368503"></a><a name="p123169368503"></a>提供两种集群类型：<a name="ul19316636115017"></a><a name="ul19316636115017"></a><ul id="ul19316636115017"><li>分析集群：用来做离线数据分析，提供的是Hadoop体系的组件。</li><li>流式集群：用来做流处理任务，提供的是流式处理组件。</li></ul>
    </div>
    <div class="note" id="note03171936115010"><a name="note03171936115010"></a><a name="note03171936115010"></a><span class="notetitle"> 说明： </span><div class="notebody"><p id="p103179363506"><a name="p103179363506"></a><a name="p103179363506"></a>MRS流式集群不支持<span class="parmname" id="parmname1131714363504"><a name="parmname1131714363504"></a><a name="parmname1131714363504"></a>“作业管理”</span>和<span class="parmname" id="parmname1131713617503"><a name="parmname1131713617503"></a><a name="parmname1131713617503"></a>“文件管理”</span>功能。</p>
    </div></div>
    </td>
    </tr>
    <tr id="row10318103615508"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p9318123675018"><a name="p9318123675018"></a><a name="p9318123675018"></a>组件选择</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p131813613504"><a name="p131813613504"></a><a name="p131813613504"></a>MRS 1.5.1版本配套的组件如下：</p>
    <div class="p" id="p12318136135011"><a name="p12318136135011"></a><a name="p12318136135011"></a>分析集群组件<a name="ul73201236185014"></a><a name="ul73201236185014"></a><ul id="ul73201236185014"><li>Hadoop 2.7.2：分布式系统基础架构</li><li>Spark 2.1.0：内存分布式系统框架</li><li>Hive <span id="text19320836125013"><a name="text19320836125013"></a><a name="text19320836125013"></a>1.2.1</span>：建立在Hadoop上的数据仓库框架</li><li>HBase 1.0.2：分布式列数据库</li><li>Hue <span id="text11320123615013"><a name="text11320123615013"></a><a name="text11320123615013"></a>3.11.0</span>：提供Hadoop UI能力，让用户通过浏览器分析处理Hadoop集群数据</li><li>Loader <span id="text532112365508"><a name="text532112365508"></a><a name="text532112365508"></a>2.0.0</span>：基于开源sqoop 1.99.7开发，专为Apache Hadoop和结构化数据库（如关系型数据库）设计的高效传输大量数据的工具。<p id="p10321183615011"><a name="p10321183615011"></a><a name="p10321183615011"></a>Hadoop为必选组件，且Spark与Hive组件需要配套使用。请根据业务选择搭配组件。</p>
    </li></ul>
    </div>
    <div class="p" id="p19321113625010"><a name="p19321113625010"></a><a name="p19321113625010"></a>流式集群组件<a name="ul13321113614505"></a><a name="ul13321113614505"></a><ul id="ul13321113614505"><li>Kafka <span id="text4321193655018"><a name="text4321193655018"></a><a name="text4321193655018"></a>0.10.0.0</span>：提供分布式消息订阅的系统。</li><li>Storm <span id="text1321183618508"><a name="text1321183618508"></a><a name="text1321183618508"></a>1.0.2</span>：提供分布式实时计算的系统。</li><li>Flume <span id="text3321103645011"><a name="text3321103645011"></a><a name="text3321103645011"></a>1.6.0</span>：提供分布式、高可用、高可靠的海量日志采集、聚合和传输系统。</li></ul>
    </div>
    </td>
    </tr>
    <tr id="row13221336185016"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p332213617503"><a name="p332213617503"></a><a name="p332213617503"></a>虚拟私有云</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p1632214364509"><a name="p1632214364509"></a><a name="p1632214364509"></a>VPC即虚拟私有云，是通过逻辑方式进行网络隔离，提供安全、隔离的网络环境。</p>
    <p id="p33221236155011"><a name="p33221236155011"></a><a name="p33221236155011"></a>选择需要创建集群的VPC，单击<span class="uicontrol" id="uicontrol2322183619506"><a name="uicontrol2322183619506"></a><a name="uicontrol2322183619506"></a>“查看虚拟私有云”</span>进入VPC服务查看已创建的VPC名称和ID。如果没有VPC，需要创建一个新的VPC。</p>
    </td>
    </tr>
    <tr id="row163222368508"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p113231936165015"><a name="p113231936165015"></a><a name="p113231936165015"></a>子网</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p113235364509"><a name="p113235364509"></a><a name="p113235364509"></a>通过子网提供与其他网络隔离的、可以独享的网络资源，以提高网络安全。</p>
    <p id="p23238368508"><a name="p23238368508"></a><a name="p23238368508"></a>选择需要创建集群的子网，可进入VPC服务查看VPC下已创建的子网名称和ID。若VPC下未创建子网，请单击<span class="uicontrol" id="uicontrol03235366507"><a name="uicontrol03235366507"></a><a name="uicontrol03235366507"></a>“创建子网”</span>进行创建。</p>
    <div class="notice" id="note832313625016"><a name="note832313625016"></a><a name="note832313625016"></a><span class="noticetitle"> 注意： </span><div class="noticebody"><p id="p73231536155017"><a name="p73231536155017"></a><a name="p73231536155017"></a>请勿将子网和网络ACL关联。</p>
    </div></div>
    </td>
    </tr>
    <tr id="row123261336125018"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p1432663645019"><a name="p1432663645019"></a><a name="p1432663645019"></a>安全组</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p132633616506"><a name="p132633616506"></a><a name="p132633616506"></a>安全组是一组对弹性云服务器的访问规则的集合，为同一个VPC内具有相同安全保护需求并相互信任的弹性云服务器提供访问策略。</p>
    <p id="p232673620508"><a name="p232673620508"></a><a name="p232673620508"></a>用户创建集群时，可自动创建安全组，也可选择下拉框中已有的安全组。</p>
    </td>
    </tr>
    <tr id="row20326036155014"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p17327133616504"><a name="p17327133616504"></a><a name="p17327133616504"></a>集群高可用</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p532713665018"><a name="p532713665018"></a><a name="p532713665018"></a>是否开启集群高可用，默认开启。</p>
    <p id="p143275366503"><a name="p143275366503"></a><a name="p143275366503"></a>启用高可用特性时，所有组件的管理进程将会部署在两个master节点上，实现双机热备，防止单机故障，提高可靠性。当关闭高可用特性时，所有组件的管理进程只会部署在一个master节点上，当某个组件的进程出现异常时，该组件将无法提供服务。</p>
    <a name="ul1328136105010"></a><a name="ul1328136105010"></a><ul id="ul1328136105010"><li><a name="image11328103616508"></a><a name="image11328103616508"></a><span><img id="image11328103616508" src="figures/zh-cn_image_0113700480.png"></span>：<span class="parmname" id="parmname832823610501"><a name="parmname832823610501"></a><a name="parmname832823610501"></a>“集群高可用”</span>关闭时，Master节点实例数量固定为1个，Core节点实例数量默认为3个，最小可调整为1个。</li><li><a name="image132973645019"></a><a name="image132973645019"></a><span><img id="image132973645019" src="figures/zh-cn_image_0113700490.png"></span>：<span class="parmname" id="parmname232923635019"><a name="parmname232923635019"></a><a name="parmname232923635019"></a>“集群高可用”</span>开启时，Master节点实例数量固定为2个，Core节点实例数量默认为3个，最小可调整为1个。</li></ul>
    <p id="p133301736105014"><a name="p133301736105014"></a><a name="p133301736105014"></a>通过单击<a name="image933019365509"></a><a name="image933019365509"></a><span><img id="image933019365509" src="figures/zh-cn_image_0113700534.png"></span>或<a name="image5330123665019"></a><a name="image5330123665019"></a><span><img id="image5330123665019" src="figures/zh-cn_image_0113700544.png"></span>来关闭或开启集群高可用。</p>
    </td>
    </tr>
    </tbody>
    </table>

    **表 18**  集群节点信息

    <a name="table96605353114"></a>
    <table><thead align="left"><tr id="row186451318313"><th class="cellrowborder" valign="top" width="33.910000000000004%" id="mcps1.2.3.1.1"><p id="p156441934312"><a name="p156441934312"></a><a name="p156441934312"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="66.09%" id="mcps1.2.3.1.2"><p id="p864543183111"><a name="p864543183111"></a><a name="p864543183111"></a>参数说明</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row186454317312"><td class="cellrowborder" valign="top" width="33.910000000000004%" headers="mcps1.2.3.1.1 "><p id="p156455319314"><a name="p156455319314"></a><a name="p156455319314"></a>类型</p>
    </td>
    <td class="cellrowborder" valign="top" width="66.09%" headers="mcps1.2.3.1.2 "><p id="p2645103103117"><a name="p2645103103117"></a><a name="p2645103103117"></a>MRS提供节点类型：</p>
    <a name="ul36451034317"></a><a name="ul36451034317"></a><ul id="ul36451034317"><li>Master：指集群Master节点，负责管理集群，协调将集群可执行文件分配到Core节点。此外，还会跟踪每个作业的执行状态，监控DataNode的运行状况。</li><li>Core：指集群Core节点，处理数据并在HDFS中存储过程数据。</li></ul>
    </td>
    </tr>
    <tr id="row146571333118"><td class="cellrowborder" valign="top" width="33.910000000000004%" headers="mcps1.2.3.1.1 "><p id="p66451234317"><a name="p66451234317"></a><a name="p66451234317"></a>实例规格</p>
    </td>
    <td class="cellrowborder" valign="top" width="66.09%" headers="mcps1.2.3.1.2 "><a name="ul1865311312312"></a><a name="ul1865311312312"></a>
    <p id="p18838750115313"><a name="p18838750115313"></a><a name="p18838750115313"></a>选择主节点和核心节点的实例规格。MRS当前支持主机规格的配型由CPU+内存+Disk共同决定。</p>
    <p id="p1589618555281"><a name="p1589618555281"></a><a name="p1589618555281"></a><span id="text190475510281"><a name="text190475510281"></a><a name="text190475510281"></a>华北-北京一</span>、<span id="text1791116555285"><a name="text1791116555285"></a><a name="text1791116555285"></a>华东-上海二</span>的工作区域里 MRS 1.5.1版本支持的实例规格详细说明请参见<a href="MRS所使用的弹性云服务器规格.md">MRS所使用的弹性云服务器规格</a>。</p>
    <div class="note" id="note865763123113"><a name="note865763123113"></a><a name="note865763123113"></a><span class="notetitle"> 说明： </span><div class="notebody"><a name="ul1765716310315"></a><a name="ul1765716310315"></a><ul id="ul1765716310315"><li>节点的实例规格配置越高，数据处理分析能力越强，集群所需费用也越高。</li><li>当Core节点规格选择为HDD磁盘时，MRS无需为数据磁盘付费，但ECS需要为此付费。</li><li>当Core节点规格选择HDD磁盘时，Master节点和Core节点的系统磁盘大小为40GB，或者Master节点的数据磁盘大小为200GB，它们都称为SATA磁盘。</li><li>当Core节点规格选择非HDD磁盘时，Master节点和Core节点的磁盘类型取决于数据磁盘。</li></ul>
    </div></div>
    </td>
    </tr>
    <tr id="row865914323112"><td class="cellrowborder" valign="top" width="33.910000000000004%" headers="mcps1.2.3.1.1 "><p id="p4657531318"><a name="p4657531318"></a><a name="p4657531318"></a>实例数量</p>
    </td>
    <td class="cellrowborder" valign="top" width="66.09%" headers="mcps1.2.3.1.2 "><p id="p206590343112"><a name="p206590343112"></a><a name="p206590343112"></a>配置主节点和核心节点的个数。</p>
    <p id="p665919311318"><a name="p665919311318"></a><a name="p665919311318"></a>Master：目前固定为2</p>
    <p id="p7659143203115"><a name="p7659143203115"></a><a name="p7659143203115"></a>Core：3～100</p>
    <div class="note" id="note565914314310"><a name="note565914314310"></a><a name="note565914314310"></a><span class="notetitle"> 说明： </span><div class="notebody"><a name="ul106594311316"></a><a name="ul106594311316"></a><ul id="ul106594311316"><li>Core节点默认的最大值为100，如果用户需要的Core节点数大于100，可以联系技术支持人员或者调用后台接口修改数据库。</li><li>过小的节点容量会导致您的集群运行缓慢，而过大的节点容量会产生不必要的成本，请根据您要处理的数据对集群节点数量进行调整。</li></ul>
    </div></div>
    </td>
    </tr>
    <tr id="row266016333118"><td class="cellrowborder" valign="top" width="33.910000000000004%" headers="mcps1.2.3.1.1 "><p id="p1965953133112"><a name="p1965953133112"></a><a name="p1965953133112"></a>存储空间</p>
    </td>
    <td class="cellrowborder" valign="top" width="66.09%" headers="mcps1.2.3.1.2 "><p id="p7660934312"><a name="p7660934312"></a><a name="p7660934312"></a>Core节点数据磁盘存储空间。为增大数据存储容量，创建集群时可同时购买磁盘，有如下应用场景：</p>
    <a name="ul166602034318"></a><a name="ul166602034318"></a><ul id="ul166602034318"><li>数据存储和计算分离，数据存储在OBS中，集群存储成本低，存储量不受限制，并且集群可以随时删除，但计算性能取决于OBS访问性能，相对HDFS有所下降，建议在数据计算不频繁场景下使用。</li><li>数据存储和计算不分离，数据存储在HDFS中，集群成本较高，计算性能高，但存储量受磁盘空间限制，删除集群前需将数据导出保存，建议在数据计算频繁场景下使用。</li></ul>
    <p id="p766014313118"><a name="p766014313118"></a><a name="p766014313118"></a>目前支持SATA、SAS和SSD存储类型：</p>
    <a name="ul0556145231418"></a><a name="ul0556145231418"></a><ul id="ul0556145231418"><li>SATA：普通IO</li><li>SAS：高IO</li><li>SSD：超高IO</li></ul>
    <p id="p566020363117"><a name="p566020363117"></a><a name="p566020363117"></a>取值范围：100GB～32000GB</p>
    <div class="note" id="note1660103163120"><a name="note1660103163120"></a><a name="note1660103163120"></a><span class="notetitle"> 说明： </span><div class="notebody"><a name="ul86602316316"></a><a name="ul86602316316"></a><ul id="ul86602316316"><li>Master节点自动为MRS Manager增加数据磁盘存储空间，硬盘类型与Core节点数据磁盘类型相同，但磁盘空间默认为200GB且不支持修改。</li><li>当Core节点规格选择d1.4xlarge、d2.4xlarge.8、d2.8xlarge.8或d1.8xlarge后，<span class="parmvalue" id="parmvalue166016311316"><a name="parmvalue166016311316"></a><a name="parmvalue166016311316"></a>“存储空间”</span>参数不显示。</li></ul>
    </div></div>
    </td>
    </tr>
    </tbody>
    </table>

    **表 19**  登录信息

    <a name="table1311093416537"></a>
    <table><thead align="left"><tr id="row162004346536"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.3.1.1"><p id="p1523815345531"><a name="p1523815345531"></a><a name="p1523815345531"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="80%" id="mcps1.2.3.1.2"><p id="p1726863419538"><a name="p1726863419538"></a><a name="p1726863419538"></a>参数说明</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row03027343537"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p1433419349536"><a name="p1433419349536"></a><a name="p1433419349536"></a>登录方式</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><a name="ul13682034115317"></a><a name="ul13682034115317"></a><ul id="ul13682034115317"><li>密码<p id="p18417183495310"><a name="p18417183495310"></a><a name="p18417183495310"></a>使用密码方式登录ECS节点。</p>
    <p id="p15435734175319"><a name="p15435734175319"></a><a name="p15435734175319"></a>密码设置约束如下：</p>
    <a name="ol7458034165317"></a><a name="ol7458034165317"></a><ol id="ol7458034165317"><li>字符串类型，可输入的字符串长度为8-26。</li><li>至少包含三种字符组合，如大写字母，小写字母，数字，特殊字符（!@$%^-_=+[{}]:\,./?），但不能包含空格。</li><li>不能与用户名或者倒序用户名相同。</li></ol>
    </li><li>密钥对</li></ul>
    <p id="p1662213346534"><a name="p1662213346534"></a><a name="p1662213346534"></a>使用密钥方式登录集群ECS节点。从下拉框中选择密钥对，如果已获取私钥文件，请勾选“我确认已获取该密钥对中的私钥文件<i><span class="varname" id="varname1264018345535"><a name="varname1264018345535"></a><a name="varname1264018345535"></a>SSHkey-bba1.pem</span></i>，否则无法登录弹性云服务器”。如果没有创建密钥对，请单击<span class="uicontrol" id="uicontrol1666053412535"><a name="uicontrol1666053412535"></a><a name="uicontrol1666053412535"></a>“查看密钥对”</span>创建或导入密钥，然后再获取私钥文件。</p>
    <p id="p10680133435312"><a name="p10680133435312"></a><a name="p10680133435312"></a>密钥对即SSH密钥，包含SSH公钥和私钥。您可以新建一个SSH密钥，并下载私钥用于远程登录身份认证。为保证安全，私钥只能下载一次，请妥善保管。</p>
    <p id="p127011334165310"><a name="p127011334165310"></a><a name="p127011334165310"></a>您可以通过以下两种方式中的任意一种使用SSH密钥。</p>
    <a name="ol1272116345538"></a><a name="ol1272116345538"></a><ol id="ol1272116345538"><li>创建SSH密钥：创建SSH密钥，同时会创建公钥和私钥，公钥保存在ECS系统中，私钥保存在用户本机。当登录弹性云服务器时，使用公钥和私钥进行鉴权。</li><li>导入SSH密钥：当用户已有公钥和私钥，可以选择将公钥导入系统。当登录弹性云服务器时，使用公钥和私钥进行鉴权。</li></ol>
    </td>
    </tr>
    </tbody>
    </table>

    **表 20**  日志管理信息

    <a name="table066216343115"></a>
    <table><thead align="left"><tr id="row9660438319"><th class="cellrowborder" valign="top" width="19.919999999999998%" id="mcps1.2.3.1.1"><p id="p13660133143119"><a name="p13660133143119"></a><a name="p13660133143119"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="80.08%" id="mcps1.2.3.1.2"><p id="p3660337317"><a name="p3660337317"></a><a name="p3660337317"></a>参数说明</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row866112317312"><td class="cellrowborder" valign="top" width="19.919999999999998%" headers="mcps1.2.3.1.1 "><p id="p1366016310318"><a name="p1366016310318"></a><a name="p1366016310318"></a>日志记录</p>
    </td>
    <td class="cellrowborder" valign="top" width="80.08%" headers="mcps1.2.3.1.2 "><p id="p366018343110"><a name="p366018343110"></a><a name="p366018343110"></a>租户是否开启日志收集功能。</p>
    <a name="ul206613393117"></a><a name="ul206613393117"></a><ul id="ul206613393117"><li><a name="image866016311317"></a><a name="image866016311317"></a><span><img id="image866016311317" src="figures/zh-cn_image_0102927727.png"></span> ：开启</li><li><a name="image3660932311"></a><a name="image3660932311"></a><span><img id="image3660932311" src="figures/zh-cn_image_0102927735.png"></span>：关闭</li></ul>
    <p id="p96617310312"><a name="p96617310312"></a><a name="p96617310312"></a>通过单击<a name="image1566193203111"></a><a name="image1566193203111"></a><span><img id="image1566193203111" src="figures/zh-cn_image_0102927743.png"></span>或<a name="image186611635315"></a><a name="image186611635315"></a><span><img id="image186611635315" src="figures/zh-cn_image_0102927751.png"></span>来关闭或开启日志收集功能。</p>
    <p id="p103951056163012"><a name="p103951056163012"></a><a name="p103951056163012"></a>说明：该参数仅在MRS 1.7.1及之前版本有效。</p>
    </td>
    </tr>
    <tr id="row1666219317310"><td class="cellrowborder" valign="top" width="19.919999999999998%" headers="mcps1.2.3.1.1 "><p id="p66618319313"><a name="p66618319313"></a><a name="p66618319313"></a>OBS桶</p>
    </td>
    <td class="cellrowborder" valign="top" width="80.08%" headers="mcps1.2.3.1.2 "><p id="p1166117303112"><a name="p1166117303112"></a><a name="p1166117303112"></a>日志收集后存放的路径。</p>
    <p id="p18661123153118"><a name="p18661123153118"></a><a name="p18661123153118"></a>例如s3a://mrs-log-a3859af76b874760969cd24f2640bbb4-northchina</p>
    <p id="p76615383114"><a name="p76615383114"></a><a name="p76615383114"></a>勾选<span class="parmvalue" id="parmvalue166615383110"><a name="parmvalue166615383110"></a><a name="parmvalue166615383110"></a>“我确认OBS桶s3a://mrs-log-a3859af76b874760969cd24f2640bbb4-northchina将被创建，该桶仅用于MRS集群创建失败日志收集。”</span></p>
    <p id="p146619315312"><a name="p146619315312"></a><a name="p146619315312"></a>用户创建了支持日志记录的MRS集群，当集群创建失败时，可以使用OBS服务下载日志来诊断问题。</p>
    <p id="p0661173133112"><a name="p0661173133112"></a><a name="p0661173133112"></a>操作步骤：</p>
    <a name="ol7662435317"></a><a name="ol7662435317"></a><ol id="ol7662435317"><li>登录OBS管理控制台。</li><li>在桶列表中选择<span class="filepath" id="filepath466215353115"><a name="filepath466215353115"></a><a name="filepath466215353115"></a>“mrs-log-&lt;tenant_id&gt;-&lt;region_id&gt;”</span>桶<em id="i76620316318"><a name="i76620316318"></a><a name="i76620316318"></a>，</em>进入<span class="filepath" id="filepath26622333120"><a name="filepath26622333120"></a><a name="filepath26622333120"></a>“/&lt;cluster_id&gt;/install_log”</span>文件夹，下载<span class="filepath" id="filepath2066212393115"><a name="filepath2066212393115"></a><a name="filepath2066212393115"></a>“YYYYMMDDHHMMSS.tar.gz”</span>日志。<p id="p866243153118"><a name="p866243153118"></a><a name="p866243153118"></a>如/mrs-log-a3859af76b874760969cd24f2640bbb4-northchina/65d0a20f-bcb7-4da3-81d3-71fef12d993d/20170818091516.tar.gz。</p>
    </li></ol>
    <p id="p1914971314314"><a name="p1914971314314"></a><a name="p1914971314314"></a>说明：该参数仅在MRS 1.7.1及之前版本有效。</p>
    </td>
    </tr>
    </tbody>
    </table>

    **表 21**  购买时长配置

    <a name="table96639317317"></a>
    <table><thead align="left"><tr id="row66631432313"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.3.1.1"><p id="p86634353111"><a name="p86634353111"></a><a name="p86634353111"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="80%" id="mcps1.2.3.1.2"><p id="p166637343115"><a name="p166637343115"></a><a name="p166637343115"></a>参数说明</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row66639373117"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p16663438317"><a name="p16663438317"></a><a name="p16663438317"></a>购买时长</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p1266383183111"><a name="p1266383183111"></a><a name="p1266383183111"></a>包年/包月模式下购买集群的时长。最短时长为1个月，最长时长为1年。</p>
    </td>
    </tr>
    </tbody>
    </table>

    **表 22**  高级配置信息

    <a name="table165918481521"></a>
    <table><thead align="left"><tr id="row9690174825218"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.3.1.1"><p id="p1072624815522"><a name="p1072624815522"></a><a name="p1072624815522"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="80%" id="mcps1.2.3.1.2"><p id="p7761134815529"><a name="p7761134815529"></a><a name="p7761134815529"></a>参数说明</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row179974813525"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p1884018484529"><a name="p1884018484529"></a><a name="p1884018484529"></a>现在配置</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p1287610486526"><a name="p1287610486526"></a><a name="p1287610486526"></a>单击<span class="uicontrol" id="uicontrol9896204810523"><a name="uicontrol9896204810523"></a><a name="uicontrol9896204810523"></a>“现在配置”</span>，呈现添加标签、引导操作。</p>
    <a name="ul201529493115"></a><a name="ul201529493115"></a><ul id="ul201529493115"><li>添加标签具体请参考<a href="管理集群标签.md">管理集群标签</a></li><li>添加引导操作具体请参考<a href="引导操作简介.md">引导操作简介</a></li></ul>
    </td>
    </tr>
    <tr id="row31152497529"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.3.1.1 "><p id="p161611949195212"><a name="p161611949195212"></a><a name="p161611949195212"></a>暂不配置</p>
    </td>
    <td class="cellrowborder" valign="top" width="80%" headers="mcps1.2.3.1.2 "><p id="p51931949195217"><a name="p51931949195217"></a><a name="p51931949195217"></a>暂不配置任何信息。</p>
    </td>
    </tr>
    </tbody>
    </table>

4.  单击“立即购买“。
5.  确认集群详情，若选择“包年/包月”集群请单击“提交订单“，若选择“按需计费”集群请单击“提交申请“，成功提交集群创建任务。

    集群创建需要时间，所创集群的初始状态为“启动中”，创建成功后状态更新为“运行中”，请您耐心等待。

    MRS系统界面支持同一时间并发创建10个集群，且最多支持管理集群100个。

    >![](public_sys-resources/icon-note.gif) **说明：**   
    >当创建集群时，您还可以创建处于Failed或者Terminated状态的同名集群。  


