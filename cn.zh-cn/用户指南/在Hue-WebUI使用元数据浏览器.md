# 在Hue WebUI使用元数据浏览器<a name="ZH-CN_TOPIC_0173178658"></a>

## 操作场景<a name="s005f823b53fb448aa190d542f069040f"></a>

-   针对MRS 1.8.1之前的集群，MRS集群启用Kerberos认证后，用户需要使用图形化界面在集群中管理Hive的元数据，可以通过Hue完成任务。
-   针对MRS 1.8.1及之后的集群，用户需要使用图形化界面在集群中管理Hive的元数据，可以通过Hue完成任务。

## 前提条件<a name="s3c28b790b7ff488280152b6a7bc7cc70"></a>

启用Kerberos认证时，MRS集群管理员已分配用户使用Hive的权限。具体请参见[创建角色](创建角色.md)。

## 访问元数据浏览器<a name="section2565199014569"></a>

1.  访问Hue WebUI。
2.  选择“Data Browsers  \>  Metastore 表“，进入“Metastore Manager“。

    “Metastore Manager“支持以下功能：

    -   使用文件创建一个Hive表
    -   手动创建一个Hive表
    -   查看Hive表元数据


## 使用文件创建一个Hive表<a name="section46959017145822"></a>

1.  访问“Metastore Manager“，在“数据库“选择一个数据库。

    默认数据库为“default“。

2.  单击![](figures/icon_mrs_dbcrate.jpg)，进入“从文件中创建一个新表“页面。
3.  选择文件。
    1.  在“表名“填写Hive表的名称。

        支持字母、数字、下划线，首位必须为字母或数字，且长度不能超过128位。

    2.  根据需要，在“描述“填写Hive表的描述信息。
    3.  在“输入文件或路径“单击![](figures/icon_mrs_dbmanu.jpg)，在HDFS中选择一个用于创建Hive表文件。此文件将存储Hive表的新数据。

        如果文件未在HDFS中保存，可以单击“上传文件“从本地选择文件并上传。支持同时上传多个文件，文件不可为空。

    4.  如果需要将文件中的数据导入Hive表，选择“导入数据“作为“加载方式“。默认选择“导入数据“。

        选择“创建外部表“时，创建的是Hive外部表。

        >![](public_sys-resources/icon-note.gif) **说明：**   
        >当选择“创建外部表“时，参数“输入文件或路径“需要选择为路径。  

        选择“留空“则创建空的Hive表。

    5.  单击“下一页“。

4.  设置分隔符。
    1.  在“分隔符“选择一个分隔符。

        如果分隔符不在列表中，选择“Other..“，然后输入新定义的分隔符。

    2.  单击“预览“查看数据处理预览。
    3.  单击“下一页“。

5.  定义字段列。
    1.  单击“使用第一行作为列名称“右侧的![](figures/icon_mrs_hue_Columnname.jpg)，则使用文件中第一行数据作为列名称。取消则不使用数据作为列名称。
    2.  在“列名“编辑每个列的名称。

        支持字母、数字、下划线，首位必须为字母或数字，且长度不能超过128位。

        >![](public_sys-resources/icon-note.gif) **说明：**   
        >单击“批量编辑列名称“右侧的![](figures/icon_mrs_dbhueedit.jpg)，可批量对列重新命名。输入所有列的名称并使用逗号分隔。  

    3.  在“列类型“选择每个列的类型。

6.  单击“创建表“创建表，等待Hue显示Hive表的信息。

## 手工创建一个Hive表<a name="section33909292145956"></a>

1.  访问“Metastore Manager“，在“数据库“选择一个数据库。

    默认数据库为“default“。

2.  单击![](figures/icon_mrs_dbadd.jpg)，进入“手动创建一个新表“页面。
3.  设置表名称。
    1.  在“表名“填写Hive表的名称。

        支持字母、数字、下划线，首位必须为字母或数字，且长度不能超过128位。

    2.  根据需要，在“描述“填写Hive表的描述信息。
    3.  单击“下一页“。

4.  选择一个存储数据的格式。
    -   需要使用分隔符分隔数据时，选择“已分隔“，然后执行[5](#li379246041509)。
    -   需要使用序列化格式保存数据时，选择“SerDe“，执行[6](#li119336551509)。

5.  <a name="li379246041509"></a>配置分隔符。
    1.  在“字段终止符“设置一个列分隔符。

        如果分隔符不在列表中，选择“Other..“，然后输入新定义的分隔符。

    2.  在“集合终结符“设置一个分隔符，用于分隔Hive中类型为“array“的列的数据集合。例如一个列为array类型，其中一个值需要保存“employee“和“manager“，用户指定分隔符为“:“，则最终的值为“employee:manager“。
    3.  在“Map 键终止符“设置一个分隔符，用于分隔Hive中类型为“map“的列的数据。例如某个列为map类型，其中一个值需要保存描述为“aaa“的“home“，和描述为“bbb“的“company“，用户指定分隔符为“|“，则最终的值为“home|aaa:company|bbb“。
    4.  单击“下一页“，执行[7](#li564987691509)。

6.  <a name="li119336551509"></a>设置序列化属性。
    1.  在“SerDe 名称“输入序列化格式的类名称“org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe“。

        用户可扩展Hive支持更多自定义的序列化类。

    2.  在“Serde properties“输入序列化的样式的值：“"field.delim"="," "colelction.delim"=":" "mapkey.delim"="|"“。
    3.  单击“下一页“，执行执行[7](#li564987691509)。

7.  <a name="li564987691509"></a>选择一个数据表的格式，并单击“Next“。
    -   “TextFile“表示使用文本类型文件存储数据。
    -   “SequenceFile“表示使用二进制类型文件存储数据。
    -   “InputFormat“表示使用自定义的输入输出格式来使用文件中的数据。

        用户可扩展Hive支持更多的自定义格式化类。

        1.  在“InputFormat 类“填写输入数据使用的类“org.apache.hadoop.hive.ql.io.RCFileInputFormat“。
        2.  在“OutputFormat 类“填写输出数据使用的类“org.apache.hadoop.hive.ql.io.RCFileOutputFormat“。

8.  选择一个文件保存位置，并单击“下一页“。

    默认勾选“使用默认位置“。如果需要自定义存储位置，请取消选中状态并在“External location“指定一个文件存储位置。

9.  设置Hive表的字段。
    1.  在“列名“设置列的名称。

        支持字母、数字、下划线，首位必须为字母或数字，且长度不能超过128位。

    2.  在“列类型“选择一个数据类型。

        单击“添加一列“可增加新的列。

    3.  单击“添加一个分区“为Hive表增加分区，可提高查询效率。

10. 单击“创建表“创建表，等待Hue显示Hive表的信息。

## 管理Hive表<a name="section1010060115237"></a>

1.  访问“Metastore Manager“，在“数据库“选择一个数据库，页面显示数据库中所有的表。

    默认数据库为“default“。

2.  单击数据库中的表名称，打开表的详细信息。

    支持导入数据、浏览数据、删除表或查看文件存储位置。

    >![](public_sys-resources/icon-note.gif) **说明：**   
    >查看数据库所有的表时，可以直接勾选表然后执行查看、浏览数据或删除表操作。  


